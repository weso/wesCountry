function HashTable(c){this.length=0;var h={},r=new SortedArray,e;for(e in c)c.hasOwnProperty(e)&&(h[e]=c[e],this.length++);this.setItem=function(b,a){var d=void 0;-1!=r.search(b)?d=h[b]:this.length++;h[b]=a;r.uniqueInsert(b);return d};this.getItem=function(b){return-1!=r.search(b)?h[b]:void 0};this.hasItem=function(b){return-1!=r.search(b)};this.removeItem=function(b){if(-1!=r.search(b))return previous=h[b],this.length--,delete h[b],r.remove(b),previous};this.keys=function(){return r};this.values=
function(){for(var b=[],a,d=0;d<r.getArray().length;d++)a=r.getArray()[d],b.push(h[a]);return b};this.each=function(b){for(var a in r)b(a,h[a])};this.clear=function(){h={};r=new SortedArray;this.length=0}}
var jSVG=new function(){function c(h){function r(b,d,n,m){d=new c(d);var f;m=JSON.parse(JSON.stringify(m));if(n)for(f in n)m[f]=n[f];f=m;m={};for(var e in f)m[e]=new a(null,e,f[e]);d.attributes(m);b&&b.appendChild(d);return d}var e={width:500,height:500,version:"1.1"},b={fill:"black",stroke:"none","stroke-width":"1",x:"0",y:"0",width:"10",height:"10",r:"5",cx:"5",cy:"5",x1:0,x2:10,y1:0,y2:10},a=function(b,a,d){this.namespace=b;this.name=a;this.value=d},d={},n={},m="",k=void 0,f=[];this.svg=function(b){b||
(b={});return r(null,"svg",b,e)};this.elementByName=function(a,d){return r(this,a,d,b)};this.g=function(a){return r(this,"g",a,b)};this.path=function(a){return r(this,"path",a,b)};this.rectangle=function(a){return r(this,"rect",a,b)};this.circle=function(a){return r(this,"circle",a,b)};this.line=function(a){return r(this,"line",a,b)};this.text=function(a){var d=r(this,"text",a,b);d.value(a.value);return d};this.a=function(a,d){var n=r(this,"a",a,b);n.attribute("http://www.w3.org/1999/xlink","xlink:href",
d);return n};this.attribute=function(b,n,c){d[n]=new a(b,n,c);return this};this.attributes=function(a){d=a;return this};this.style=function(a){m=a;return this};this.value=function(a){k=a;return this};this.event=function(a,b){n[a]=b;return this};this.width=function(){return d.width.value};this.height=function(){return d.height.value};this.appendChild=function(a){f.push(a)};this.render=function(){var a=document.createElementNS("http://www.w3.org/2000/svg",h),b;for(b in d){var c=d[b];a.setAttributeNS(c.namespace,
c.name,c.value)}a.setAttributeNS(null,"style",m);for(var e in n)a[e]=n[e];for(b=0;b<f.length;b++)a.appendChild(f[b].render());k&&(b=document.createTextNode(k),a.appendChild(b));return a};this.toString=function(){var a="",b;for(b in d)var n=d[b],a=a+String.format(' {0}="{1}"',n.name,n.value);b="";for(n=0;n<f.length;n++)b+=f[n].toString();return String.format('<{0} xmlns="{1}" {2} style="{3}">{4}{5}</{0}>',h,"http://www.w3.org/2000/svg",a,m,b,k?k:"")}}return new c};
String.format=function(c){for(var h=1;h<arguments.length;h++)c=c.replace(RegExp("\\{"+(h-1)+"\\}","g"),arguments[h]);return c};String.prototype.toFirstUpperCase=function(){var c=this[0].toUpperCase(),h=this.substr(1);return c+h};"undefined"===typeof exports&&(exports={});if("undefined"===typeof wesCountry)var wesCountry={};
wesCountry.charts=new function(){function c(b,a){if(a instanceof Array)return a;if("object"===typeof a){for(var d in a)b[d]=c(b[d],a[d]);return b}return a}function h(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function r(b){if(e){var a=b?b:event;b=a.clientX;a=a.clientY;diffX=24;diffY=0;e.style.top=a-2+diffY+document.body.scrollTop+"px";e.style.left=b-2+diffX+document.body.scrollLeft+"px"}}this.defaultOptions={width:600,height:400,chartType:"bar",container:"body",margins:[10,
20,10,5],backgroundColour:"none",serieColours:["#FCD271","#FA5882","#2BBBD8","#102E37"],overColour:"#333",groupMargin:4,barMargin:8,sortSeries:!1,valueOnItem:{show:!0,margin:5,"font-family":"Helvetica","font-colour":"#aaa","font-size":"16px"},xAxis:{title:"Months",colour:"none",margin:10,tickColour:"none",values:["Jan","Feb","Mar","Apr","May"],"font-family":"Helvetica","font-colour":"#666","font-size":"16px"},yAxis:{title:"Values",colour:"none",margin:10,tickColour:"#ccc","font-family":"Helvetica",
"font-colour":"#aaa","font-size":"16px","from-zero":!1},series:[{name:"First",values:[-1,4,5,3,6],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Second",values:[1,7,5,6,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Third",values:[0,1,2,3,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es",
"http://www.google.es"]}],legend:{show:!0,itemSize:1,"font-colour":"#666","font-family":"Helvetica","font-size":"16px"},tooltip:{show:!0,style:{display:"none",padding:"0.8em 0.5em","font-size":"12px",border:"0.1em solid #ccc","background-color":"#fff",position:"absolute",color:"#000"}},events:{onmouseover:function(b,a,d){b=String.format("Series '{0}': ({1}, {2})",b,a,d);console.log(b);wesCountry.charts.showTooltip(b)},onmouseout:function(){wesCountry.charts.hideTooltip()},onclick:function(){}}};this.sortSeries=
function(b){b.sort(function(a,b){for(var n=a.values,c=b.values,e=Math.max(n.length,c.length),f=0,g=0;g<e;g++)(n[g]?n[g]:0)>(c[g]?c[g]:0)&&f++;return f>=e/2?-1:1});return b};this.getSVG=function(b){return jSVG.svg({width:b.width,height:b.height})};this.showLegend=function(b,a,d){for(var n=d.series.length,c=a.width-0.2*a.marginRight,e=0;e<n;e++){var f=a.marginTop+2.5*(a.legendItemSize+a.barMargin)*e;b.circle({cx:c,cy:f,r:a.legendItemSize}).style(String.format("fill: {0}",d.serieColours[e%d.serieColours.length]));
b.text({x:c-2*a.legendItemSize,y:f,value:d.series[e].name}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",d.legend["font-colour"],d.legend["font-family"],d.legend["font-size"]))}};this.mergeOptionsAndDefaultOptions=function(b,a){if(b){"string"===typeof b&&(b={container:b});var d=this.clone(a),n;for(n in b)d[n]=c(d[n],b[n]);b=d}else b=this.clone(a);return b};this.clone=function(b){if(null==b||"object"!=typeof b)return b;var a=b.constructor(),
d;for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a};this.setAxisY=function(b,a,d){b.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.yAxisMargin,y1:a.marginTop,y2:a.innerHeight+a.marginTop-a.xAxisMargin}).style(String.format("stroke: {0}",d.yAxis.colour));for(var n=a.ticksY+1,c=0;c<n;c++)b.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.innerWidth,y1:a.marginTop+c*a.yTickHeight,y2:a.marginTop+c*a.yTickHeight}).style(String.format("stroke: {0}",d.yAxis.tickColour));for(c=0;c<n;c++)b.text({x:a.marginLeft+
a.yAxisMargin/1.8,y:a.marginTop+c*a.yTickHeight,value:(a.maxValue-c*a.valueInc).toFixed(0)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",d.yAxis["font-colour"],d.yAxis["font-family"],d.yAxis["font-size"]));n=a.marginLeft;a=a.marginTop+(a.innerHeight-a.xAxisMargin)/2;b.text({x:n,y:a,value:d.yAxis.title,transform:String.format("rotate(-90 {0}, {1})",n,a)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",d.yAxis["font-colour"],
d.yAxis["font-family"],d.yAxis["font-size"]))};this.setAxisX=function(b,a,d){var c=a.marginTop+a.innerHeight-a.xAxisMargin+a.minValue/(a.maxValue-a.minValue)*(a.innerHeight-a.xAxisMargin);b.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.innerWidth,y1:c,y2:c}).style(String.format("stroke: {0}",d.xAxis.colour));for(var c=a.maxValueLength,e=0;e<c;e++){var k=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*e;b.line({x1:k,x2:k,y1:a.marginTop,y2:a.innerHeight+
a.marginTop-a.xAxisMargin}).style(String.format("stroke: {0}",d.xAxis.tickColour));b.text({x:k,y:a.marginTop+a.innerHeight-a.xAxisMargin/2,value:d.xAxis.values[e]?d.xAxis.values[e]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",d.xAxis["font-colour"],d.xAxis["font-family"],d.xAxis["font-size"]))}b.text({x:a.marginLeft+a.yAxisMargin+(a.innerWidth-a.yAxisMargin)/2,y:a.marginTop+a.innerHeight+a.xAxisMargin/2,value:d.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
d.xAxis["font-colour"],d.xAxis["font-family"],d.xAxis["font-size"]))};this.getMaxAndMinValuesAxisY=function(b){for(var a=0,d=Number.MAX_VALUE,c=b.series.length,e=null,k=null,f=0,g=0;g<c;g++){e=b.series[g].values.length;e>f&&(f=e);for(var l=0;l<e;l++)k=b.series[g].values[l],k instanceof Array&&(k=k[1]?k[1]:0),k>a&&(a=k),k<d&&(d=k)}!0==b.yAxis["from-zero"]&&0<d&&(d=0);b=this.getNearestNumber(d,a);return{max:b.max,min:b.min,valueLength:f,inc:b.inc}};this.setBackground=function(b,a,d){b.rectangle({x:0,
y:0,width:a.width,height:a.height}).style(String.format("fill: {0}",d.backgroundColour))};this.getNearestNumber=function(b,a){var d;d=a-b;var c=0;15>d?c=1:30>d?c=5:(d=1+Math.floor(Math.log(d)/Math.log(10)),c=Math.pow(10,d-1));d=c;return{max:Math.ceil(a/d)*d,min:Math.floor(b/d)*d,inc:d}};this.guid=function(){return h()+h()+"-"+h()+"-"+h()+"-"+h()+"-"+h()+h()+h()};var e=null;this.createTooltip=function(b){if(!0==b.tooltip.show){if(e=document.getElementById("wesCountryTooltip"),!e){e=document.createElement("span");
e.id="wesCountryTooltip";document.body.appendChild(e);var a="",d;for(d in b.tooltip.style)a+=String.format("{0}:{1};",d,b.tooltip.style[d]);e.setAttribute("style",a)}}else e=null};this.showTooltip=function(b){e&&(r(),e.innerHTML=b,e.style.display="block",window.onscroll=r)};this.hideTooltip=function(){e&&(e.style.display="none")}};
wesCountry.charts.barChart=function(c){function h(c,e){var b=c.width(),a=c.height(),d=a*e.margins[0]/100,n=b*e.margins[1]/100,m=a*e.margins[2]/100,k=b*e.margins[3]/100,f=e.yAxis.margin*b/100,g=e.xAxis.margin*a/100,l=b-k-n,v=a-d-m,p=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=p.max,u=0<p.min?0:p.min,t=p.valueLength,q=(s-u)/p.inc,p=(l-f)/p.valueLength,h=e.groupMargin*p/100,p=p-2*h,w=p/e.series.length,x=e.barMargin*w/100;return{width:b,height:a,marginTop:d,marginRight:n,marginBottom:m,marginLeft:k,
innerWidth:l,innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:q,yTickHeight:0!=q?(v-g)/q:0,xTickWidth:p,valueInc:0!=q?(s-u)/q:0,barMargin:x,groupMargin:h,barWidth:w-2*x,legendItemSize:e.legend.itemSize*b/100}}return function(){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);c.yAxis["from-zero"]=!0;c.sortSeries&&(c.series=wesCountry.charts.sortSeries(c.series));var r=wesCountry.charts.getSVG(c),e=h(r,c),b=r.g();wesCountry.charts.setBackground(b,
e,c);wesCountry.charts.setAxisY(b,e,c);wesCountry.charts.setAxisX(b,e,c);for(var a=e.maxValueLength,d=c.series.length,n=e.barWidth,m=e.innerHeight-e.xAxisMargin,k=e.minValue/(e.maxValue-e.minValue)*m,f=0;f<a;f++)for(var g=0;g<d;g++){var l=c.series[g].name,v=c.series[g].values[f],p=c.series[g].urls?c.series[g].urls[f]:"",s=c.xAxis.values[g];v||(v=0);var u=e.marginLeft+e.yAxisMargin+e.groupMargin*(2*f+1)+e.barMargin+e.xTickWidth*f+(n+2*e.barMargin)*g,t=0<=v?e.marginTop+e.innerHeight-e.xAxisMargin+k-
v/(e.maxValue-e.minValue)*m:e.marginTop+e.innerHeight-e.xAxisMargin+k,q=Math.abs(v)/(e.maxValue-e.minValue)*m,l={x:u,y:t,width:n,height:q,serie:l,value:v,pos:s},s=String.format("fill: {0}",c.serieColours[g]),q=function(){this.colour=this.style.fill;this.style.fill=c.overColour;c.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},y=function(){this.style.fill=this.colour;c.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
w=function(){this.style.fill=this.colour;c.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};p&&""!=p?b.a({},p?p:"").rectangle(l).style(s).event("onmouseover",q).event("onmouseout",y).event("onclick",w):b.rectangle(l).style(s).event("onmouseover",q).event("onmouseout",y).event("onclick",w);!0==c.valueOnItem.show&&b.text({x:u+n/2,y:t-c.height/100*c.valueOnItem.margin,value:v.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
c.valueOnItem["font-colour"],c.valueOnItem["font-family"],c.valueOnItem["font-size"]))}c.legend.show&&wesCountry.charts.showLegend(b,e,c);wesCountry.charts.createTooltip(c);return r}()};wesCountry.charts.lineChart=function(c){return this.generateLineChart(c,!1)};wesCountry.charts.areaChart=function(c){return this.generateLineChart(c,!0)};
wesCountry.charts.generateLineChart=function(c,h){function r(b,a,d,c){return a.marginTop+a.innerHeight-a.xAxisMargin+d-b/(a.maxValue-a.minValue)*c}function e(b,a){var d=b.width(),c=b.height(),e=c*a.margins[0]/100,k=d*a.margins[1]/100,f=c*a.margins[2]/100,g=d*a.margins[3]/100,l=a.yAxis.margin*d/100,r=a.xAxis.margin*c/100,p=d-g-k,s=c-e-f,u=wesCountry.charts.getMaxAndMinValuesAxisY(a),t=u.max,q=u.min,h=u.valueLength;q==t&&(q=0<=q?0:q-2,t+=2);var w=(t-q)/u.inc,u=(p-l)/u.valueLength,x=a.groupMargin*u/
100,u=u-2*x,B=u/a.series.length,z=a.barMargin*B/100;return{width:d,height:c,marginTop:e,marginRight:k,marginBottom:f,marginLeft:g,innerWidth:p,innerHeight:s,yAxisMargin:l,xAxisMargin:r,maxValue:t,minValue:q,maxValueLength:h,ticksY:w,yTickHeight:0!=w?(s-r)/w:0,xTickWidth:u,valueInc:0!=w?(t-q)/w:0,barMargin:z,groupMargin:x,barWidth:B-2*z,legendItemSize:a.legend.itemSize*d/100}}return function(){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);c.sortSeries&&(c.series=
wesCountry.charts.sortSeries(c.series));var b=wesCountry.charts.getSVG(c),a=e(b,c),d=b.g();wesCountry.charts.setBackground(d,a,c);wesCountry.charts.setAxisY(d,a,c);wesCountry.charts.setAxisX(d,a,c);for(var n=c.series.length,m=a.maxValueLength,k=a.innerHeight-a.xAxisMargin,f=a.minValue/(a.maxValue-a.minValue)*k,g=0;g<n;g++){var l="";if(h)var v=d.path();for(var p=Math.max(0,a.minValue),p=r(p,a,f,k),s="l"+wesCountry.charts.guid(),u=0;u<m;u++){var t=c.series[g].values[u],q=0<u?c.series[g].values[u-1]:
0,y=c.series[g].urls?c.series[g].urls[u]:"",w=c.series[g].name,x=c.xAxis.values[u];t||(t=0);q||(q=0);var B=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*u,z=r(t,a,f,k),E=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*(u-1),q=r(q,a,f,k),w={cx:B,cy:z,r:5,"class":s,serie:w,value:t,pos:x},x=String.format("fill: {0}",c.serieColours[g%c.serieColours.length]),C=function(a,b){for(var d=a.getAttribute("class"),d=a.parentNode.querySelectorAll("line."+
d),c=d.length,e=0;e<c;e++)d[e].setAttribute("stroke-width",b)},G=function(){this.setAttribute("r",8);C(this,2);c.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},D=function(){this.setAttribute("r",5);C(this,1);c.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},A=function(){this.setAttribute("r",5);C(this,1);c.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};
y&&""!=y?d.a({},y?y:"").circle(w).style(x).event("onmouseover",G).event("onmouseout",D).event("onclick",A):d.circle(w).style(x).event("onmouseover",G).event("onmouseout",D).event("onclick",A);!0==c.valueOnItem.show&&d.text({x:B,y:z-c.height/100*c.valueOnItem.margin,value:0==t?"0":t.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",c.valueOnItem["font-colour"],c.valueOnItem["font-family"],c.valueOnItem["font-size"]));0<u?(d.line({x1:E,
x2:B,y1:q,y2:z,"stroke-width":1,"class":s}).style(String.format("stroke: {0}",c.serieColours[g%c.serieColours.length])).event("onmouseover",function(){C(this,2)}).event("onmouseout",function(){C(this,1)}),l+=String.format(" L{0} {1}",B,z)):l=String.format("M{0} {1} L{2} {3}",B,p,B,z)}l+=String.format(" L{0} {1} Z",B,p);h&&v.attribute(null,"d",l).style(String.format("stroke: {0}; fill: {0}; opacity: 0.5",c.serieColours[g%c.serieColours.length]))}c.legend.show&&wesCountry.charts.showLegend(d,a,c);wesCountry.charts.createTooltip(c);
return b}()};
wesCountry.charts.pieChart=function(c){function h(c,e){var b=c.width(),a=c.height(),d=a*e.margins[0]/100,n=b*e.margins[1]/100,m=a*e.margins[2]/100,k=b*e.margins[3]/100,f=e.yAxis.margin*b/100,g=e.xAxis.margin*a/100,l=b-k-n,v=a-d-m,p=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=p.max,u=p.min,t=p.valueLength,q=(s-u)/p.inc,p=(l-f)/p.valueLength,h=e.groupMargin*p/100,p=p-2*h,w=p/e.series.length,x=e.barMargin*w/100;return{width:b,height:a,marginTop:d,marginRight:n,marginBottom:m,marginLeft:k,innerWidth:l,
innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:q,yTickHeight:0!=q?(v-g)/q:0,xTickWidth:p,valueInc:0!=q?(s-u)/q:0,barMargin:x,groupMargin:h,barWidth:w-2*x,legendItemSize:e.legend.itemSize*b/100}}return function(){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);c.sortSeries&&(c.series=wesCountry.charts.sortSeries(c.series));var r=wesCountry.charts.getSVG(c),e=h(r,c),b=r.g();wesCountry.charts.setBackground(b,e,c);var a=e.maxValueLength;
if(1==a)var d=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-2*e.xAxisMargin)/2,n=e.innerWidth/2,m=e.innerHeight/2,k=0,f=1;else 2==a?(d=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-2*e.xAxisMargin)/4,n=e.marginLeft+d,m=e.innerHeight/2,k=e.innerWidth-2*d,f=2):(8<a&&(a=8),d=Math.min(e.innerWidth,e.innerHeight-2*e.xAxisMargin)/4,f=Math.ceil(a/2),n=e.marginLeft+d,m=e.marginTop+d,k=(e.innerWidth-2*f*d)/(f-1)+2*d);for(var g=0;g<a;g++){if(g<f)var l=n+k*g,v=m;else l=a-f,v=(e.innerWidth-2*l*d)/
(l<f?l+1:l-1),k=v+2*d,l=e.marginLeft+(l<f?v:0)+d+k*(g%f),v=e.marginTop+e.innerHeight-e.xAxisMargin-d;b.text({x:l,y:v+d+e.xAxisMargin/2,value:c.xAxis.values[g]?c.xAxis.values[g]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",c.xAxis["font-colour"],c.xAxis["font-family"],c.xAxis["font-size"]));for(var p=function(){this.colour=this.style.fill;this.style.fill=c.overColour;c.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),
this.getAttribute("value"))},s=function(){this.style.fill=this.colour;c.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},u=function(){this.style.fill=this.colour;c.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},t=0,q=0,y=c.series.length,w=0;w<y;w++){var x=Math.abs(c.series[w].values[g]);x||(x=0);0!=x&&q++;t+=x}for(var B=[],w=0;w<y;w++)(x=Math.abs(2*(c.series[w].values[g]/t)*Math.PI))||(x=0),B[w]=x;if(1==
q){for(var z="",q=x=t="",w=0;w<y;w++)if(0!=B[w]){z=c.serieColours[w];t=c.series[w].name;x=Math.abs(c.series[0].values[w]).toFixed(2);q=c.xAxis.values[g];break}b.circle({cx:l,cy:v,r:d,serie:t,value:x,pos:q}).event("onmouseover",p).event("onmouseout",s).event("onclick",u).style(String.format("fill: {0}",z))}else for(w=z=0;w<y;w++){var E=z+B[w],x=Math.abs(c.series[w].values[g]).toFixed(2),t=c.series[w].name,q=c.xAxis.values[g],C=l+d*Math.sin(z),G=v-d*Math.cos(z),D=l+d*Math.sin(E),A=v-d*Math.cos(E),H=
z+(E-z)/2,F=d+d/100*c.valueOnItem.margin,I=l+F*Math.sin(H),H=v-F*Math.cos(H),F=0;E-z>Math.PI&&(F=1);b.path({d:"M "+l+","+v+" L "+C+","+G+" A "+d+","+d+" 0 "+F+" 1 "+D+","+A+" Z",serie:t,value:x,pos:q}).event("onmouseover",p).event("onmouseout",s).event("onclick",u).style(String.format("fill: {0}",c.serieColours[w]));!0==c.valueOnItem.show&&b.text({x:I,y:H,value:x}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",c.valueOnItem["font-colour"],
c.valueOnItem["font-family"],c.valueOnItem["font-size"]));z=E}}c.legend.show&&wesCountry.charts.showLegend(b,e,c);wesCountry.charts.createTooltip(c);return r}()};
wesCountry.charts.polarChart=function(c){function h(c,e){var b=c.width(),a=c.height(),d=a*e.margins[0]/100,n=b*e.margins[1]/100,m=a*e.margins[2]/100,k=b*e.margins[3]/100,f=e.yAxis.margin*b/100,g=e.xAxis.margin*a/100,l=b-k-n,v=a-d-m,p=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=p.max,u=0<p.min?0:p.min,t=p.valueLength,q=(s-u)/p.inc,p=(l-f)/p.valueLength,h=e.groupMargin*p/100,p=p-2*h,w=p/e.series.length,x=e.barMargin*w/100;return{width:b,height:a,marginTop:d,marginRight:n,marginBottom:m,marginLeft:k,
innerWidth:l,innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:q,yTickHeight:0!=q?(v-g)/q:0,xTickWidth:p,valueInc:0!=q?(s-u)/q:0,barMargin:x,groupMargin:h,barWidth:w-2*x,legendItemSize:e.legend.itemSize*b/100}}return function(){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);var r=wesCountry.charts.getSVG(c),e=h(r,c),b=r.g();wesCountry.charts.setBackground(b,e,c);for(var a=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-
2*e.xAxisMargin)/2,d=e.maxValueLength,n=e.width/2,m=e.height/2,k=[],f=0;f<d;f++)k.push({x:n+a*Math.cos(2*Math.PI*f/d-Math.PI/2),y:m+a*Math.sin(2*Math.PI*f/d-Math.PI/2)});for(f=0;f<d;f++){var g=k[f];b.line({x1:n,y1:m,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",c.yAxis.tickColour))}for(f=0;f<d;f++){var g=n+(a+e.xAxisMargin/2)*Math.cos(2*Math.PI*f/d-Math.PI/2),l=m+(a+e.xAxisMargin/2)*Math.sin(2*Math.PI*f/d-Math.PI/2),v=c.xAxis.values[f]?c.xAxis.values[f]:"";b.text({x:g,y:l,value:v}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
c.xAxis["font-colour"],c.xAxis["font-family"],c.xAxis["font-size"]))}for(var p=e.maxValue,s=e.minValue,p=5*Math.ceil(p/5),s=5*Math.floor(s/5),u=a/5,v=(p-s)/5,f=0;5>=f;f++){k=[];g=u*f;b.text({x:n-e.xAxisMargin/2,y:m-g,value:s+f*v}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",c.yAxis["font-colour"],c.yAxis["font-family"],c.yAxis["font-size"]));for(var t=0;t<d;t++)k.push({x:n+g*Math.cos(2*Math.PI*t/d-Math.PI/2),y:m+g*Math.sin(2*Math.PI*t/d-
Math.PI/2)});for(t=0;t<d;t++){var g=k[t],q=0==t?k[d-1]:k[t-1];b.line({x1:q.x,y1:q.y,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",c.yAxis.tickColour))}}q=Math.abs(s/(p-s))*a;u=c.series.length;k=[];for(f=0;f<u;f++)for(k[f]=[],t=0;t<d;t++)(v=c.series[f].values[t])||(v=0),v=0>v?q-Math.abs(v/s)*q:v/p*(a-q)+q,g=n+v*Math.cos(2*Math.PI*t/d-Math.PI/2),l=m+v*Math.sin(2*Math.PI*t/d-Math.PI/2),k[f].push({x:g,y:l});for(var y=function(a,b){for(var d=a.getAttribute("class"),d=a.parentNode.querySelectorAll("line."+
d),c=d.length,e=0;e<c;e++)d[e].setAttribute("stroke-width",b)},a=function(){this.setAttribute("r",8);y(this,2);c.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},n=function(){this.setAttribute("r",5);y(this,1);c.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},m=function(){this.setAttribute("r",5);y(this,1);c.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
f=0;f<u;f++)for(p="l"+wesCountry.charts.guid(),t=0;t<d;t++)g=k[f][t],q=0==t?k[f][d-1]:k[f][t-1],v=c.series[f].values[t],b.circle({cx:g.x,cy:g.y,r:5,serie:c.series[f].name,value:v,pos:c.xAxis.values[t],"class":p}).style(String.format("fill: {0}",c.serieColours[f%c.serieColours.length])).event("onmouseover",a).event("onmouseout",n).event("onclick",m),b.line({x1:q.x,y1:q.y,x2:g.x,y2:g.y,"class":p}).style(String.format("stroke: {0};",c.serieColours[f%c.serieColours.length]));c.legend.show&&wesCountry.charts.showLegend(b,
e,c);wesCountry.charts.createTooltip(c);return r}()};
wesCountry.charts.scatterPlot=function(c){function h(c,b){var a=c.width(),d=c.height(),n=d*b.margins[0]/100,m=a*b.margins[1]/100,k=d*b.margins[2]/100,f=a*b.margins[3]/100,g=b.yAxis.margin*a/100,l=b.xAxis.margin*d/100,h=a-f-m,p=d-n-k,s=wesCountry.charts.getMaxAndMinValuesAxisY(b),u=s.max,t=s.min,r=s.valueLength,y=(u-t)/s.inc,s=(h-g)/s.valueLength,w=b.groupMargin*s/100,s=s-2*w,x=s/b.series.length,B=b.barMargin*x/100;return{width:a,height:d,marginTop:n,marginRight:m,marginBottom:k,marginLeft:f,innerWidth:h,
innerHeight:p,yAxisMargin:g,xAxisMargin:l,maxValue:u,minValue:t,maxValueLength:r,ticksY:y,yTickHeight:0!=y?(p-l)/y:0,xTickWidth:s,valueInc:0!=y?(u-t)/y:0,barMargin:B,groupMargin:w,barWidth:x-2*B,legendItemSize:b.legend.itemSize*a/100}}function r(c,b,a){var d=b.marginTop+b.innerHeight-b.xAxisMargin+b.minValue/(0!=b.maxValue-b.minValue?b.maxValue-b.minValue:1)*(b.innerHeight-b.xAxisMargin);c.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.innerWidth,y1:d,y2:d}).style(String.format("stroke: {0}",
a.xAxis.colour));for(var d=0,n=Number.MAX_VALUE,m=a.series.length,k=null,f=null,g=0;g<m;g++)for(var k=a.series[g].values.length,l=0;l<k;l++)f=a.series[g].values[l][0]?a.series[g].values[l][0]:0,f>d&&(d=f),f<n&&(n=f);for(var d=wesCountry.charts.getNearestNumber(n,d),d={max:d.max,min:d.min,inc:d.inc},n=d.max,m=d.min,k=d.valueLength,f=(n-m)/d.inc,g=(b.innerWidth-b.yAxisMargin)/f,l=d.inc,h=f+1,p=0;p<h;p++){var s=b.marginLeft+b.yAxisMargin+g*p;c.line({x1:s,x2:s,y1:b.marginTop,y2:b.innerHeight+b.marginTop-
b.xAxisMargin}).style(String.format("stroke: {0}",a.xAxis.tickColour));c.text({x:s,y:b.marginTop+b.innerHeight-b.xAxisMargin/2,value:m+l*p}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]))}c.text({x:b.marginLeft+b.yAxisMargin+(b.innerWidth-b.yAxisMargin)/2,y:b.marginTop+b.innerHeight+b.xAxisMargin/2,value:a.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]));return{maxAndMinValues:d,maxValue:n,minValue:m,maxValueLength:k,ticksX:f,xTickWidth:g,incX:l}}return function(){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);var e=wesCountry.charts.getSVG(c),b=h(e,c),a=e.g();wesCountry.charts.setBackground(a,b,c);wesCountry.charts.setAxisY(a,b,c);var d=r(a,b,c),n=c.series.length,m=b.innerHeight-b.xAxisMargin,k=b.innerWidth-b.yAxisMargin,f=0;0>=b.minValue&&
0!=b.maxValue-b.minValue&&(f=b.minValue/(b.maxValue-b.minValue)*m);var g=0;0>=d.minValue&&(g=d.xTickWidth*Math.abs(d.minValue));for(var l=function(){this.colour=this.style.fill;this.style.fill=c.overColour;c.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},v=function(){this.style.fill=this.colour;c.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},p=function(){this.style.fill=this.colour;c.events.onclick(this.getAttribute("serie"),
this.getAttribute("pos"),this.getAttribute("value"))},s=0;s<n;s++)for(var u=c.series[s].values,t=u.length,q=0;q<t;q++){var y=u[q][0]?u[q][0]:0,w=0,x=c.series[s].values[q],B=c.series[s].name,z=y;0<q&&(w=u[q-1][0]?u[q-1][0]:0);y||(y=0);w||(w=0);var w=u[q][1]?u[q][1]:0,E=0;0<q&&(E=u[q-1][1]?u[q-1][1]:0);w||(w=0);E||(E=0);a.circle({cx:b.marginLeft+b.yAxisMargin+g+(0==d.maxValue-d.minValue?0:(y-d.minValue)/(d.maxValue-d.minValue))*k,cy:b.marginTop+b.innerHeight-b.xAxisMargin+f-(0==b.maxValue-b.minValue?
1:(w-b.minValue)/(b.maxValue-b.minValue))*m,r:5,serie:B,value:x,pos:z}).style(String.format("fill: {0}",c.serieColours[s%c.serieColours.length])).event("onmouseover",l).event("onmouseout",v).event("onclick",p)}c.legend.show&&wesCountry.charts.showLegend(a,b,c);wesCountry.charts.createTooltip(c);return e}()};
wesCountry.charts.chart=function(c){c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);var h;switch(c.chartType){case "bar":h=this.barChart(c);break;case "line":h=this.lineChart(c);break;case "pie":h=this.pieChart(c);break;case "area":h=this.areaChart(c)}document.querySelector(c.container).appendChild(h.render())};
wesCountry.charts.multiChart=function(c){function h(){var a=d.querySelector(".active").innerHTML.toLowerCase();c.chartType=a;c.container=".chartDiv";wesCountry.charts.chart(c)}function r(){document.querySelector(".active");document.querySelector(".chartDiv").innerHTML="";h()}function e(){for(var a=this.innerHTML,b=document.querySelector(".active"),c=document.querySelectorAll(".inactive"),d=c.length,e=0;e<d;e++)c[e].className=a===c[e].innerHTML?"active":"inactive";a!==b.innerHTML&&(b.className="inactive");
r()}function b(){for(var a=clone(seriesSave),b=document.querySelectorAll(".seriesSelector input"),d=a.length,e=0;e<d;e++)b[e].checked||delete a[e];b=[];for(e=0;e<d;e++)void 0!==a[e]&&b.push(a[e]);c.series=b;r()}c=wesCountry.charts.mergeOptionsAndDefaultOptions(c,wesCountry.charts.defaultOptions);seriesSave=wesCountry.charts.clone(c.series);var a=c.chartType,a=a instanceof Array?a:[a],d=document.querySelector(c.container);(function(){var b=document.createElement("div");b.className="chartSelector";
for(var c=document.createElement("ul"),k=0;k<a.length;k++){var f=document.createElement("li"),g=document.createElement("a");g.className="inactive";g.onclick=e;g.innerHTML=a[k].toFirstUpperCase();f.appendChild(g);c.appendChild(f)}b.appendChild(c);b.querySelector("li a").className="active";d.appendChild(b)})();(function(){var a=document.createElement("div");a.className="seriesSelector";for(var c=0;c<seriesSave.length;c++){var e=document.createElement("input"),f=document.createElement("label");e.id=
seriesSave[c].name+"Checkbox"+wesCountry.charts.guid();e.type="checkbox";e.className="checks";e.onchange=b;e.checked=!0;f.for=e.id;f.innerHTML=seriesSave[c].name;a.appendChild(e);a.appendChild(f)}d.appendChild(a)})();(function(){var a=document.createElement("div");a.className="chartDiv";d.appendChild(a);h()})()};"undefined"===typeof wesCountry&&(wesCountry={});
wesCountry.data=new function(){var c=null,h={},r=[];this.parseJSON=function(b){r=[];var a=function(a){return a.indicatorCode===m};h=b;b=h.data;for(var d=new HashTable,n=0;n<b.length;n++){var m=b[n].indicatorCode;if(!d.hasItem(m)){for(var k=b.filter(a),k=k.sort(e),f=new HashTable,g=0;g<k.length;g++){if(f.hasItem(k[g].countryName)){var l=f.getItem(k[g].countryName);l.push(parseFloat(k[g].value))}else l=[parseFloat(k[g].value)];f.setItem(k[g].countryName,l)}d.setItem(b[n].indicatorCode,f)}}c=d;return this};
this.parseTable=function(b){for(var a=document.querySelectorAll(".graphs"),c=0;c<a.length;c++){for(var e=a[c].querySelectorAll("th"),m=a[c].querySelectorAll("tr"),k=[],f=1;f<m.length;f++){for(var g={},l=m[f].querySelectorAll("td"),h=0;h<l.length;h++)g[e[h].className]=l[h].innerHTML;k.push(g)}b.data=k;this.parseJSON(b).iterate()}};this.iterate=function(){function b(){document.querySelector(".chartDiv").remove();document.querySelector(".seriesSelector").remove();document.querySelector(".chartSelector").remove();
a()}function a(){h.series=r[e.selectedIndex];wesCountry.charts.multiChart(JSON.parse(JSON.stringify(h)))}if(null!==c){var d=document.createElement("div");d.className="indicatorSelector";document.querySelector(h.container).appendChild(d);var e=document.createElement("select");d.appendChild(e);e.onchange=b;var d=c.keys(),d=d.array,m;for(m in d){var k=c.getItem(d[m]).keys().array,f=[],g;for(g in k)f.push({name:k[g],values:c.getItem(d[m]).getItem(k[g])});r.push(f);k=document.createElement("option");k.innerHTML=
d[m];e.appendChild(k)}a()}};var e=function(b,a){return b.year-a.year}};"undefined"===typeof wesCountry&&(wesCountry={});wesCountry.table={};
wesCountry.table.pages=new function(){function c(a){for(var b=a.querySelectorAll("tr.empty"),c=b.length,d=0;d<c;d++)b[d].parentNode.removeChild(b[d]);a.numberOfPages=Math.ceil(a.numberOfRows/a.rowsPerPage);var b=a.numberOfPages*a.rowsPerPage,c=0<a.numberOfColumns?a.numberOfColumns:1,g=a.tBodies;if(1<a.numberOfPages&&b>a.numberOfRows&&0<g.length)for(var l=a.numberOfRows;b>l;){var v=document.createElement("tr");v.className="empty";for(d=0;d<c;d++){var p=document.createElement("td");p.innerHTML="&nbsp";
v.appendChild(p)}g[0].appendChild(v);l++}a.selectedPage=1;r(a);a.changePage=h;a.reloadPage=function(){r(this)};e(a)}function h(a){a>this.numberOfPages||1>a||(this.firstShownRow=(a-1)*this.rowsPerPage,this.selectedPage=a,r(this))}function r(a){for(var b=a.firstShownRow,c=a.tBodies,d=0,e=0,l=b+1*a.rowsPerPage-1,h=c.length,p=0,s=0;s<h;s++)for(var u=c[s].rows,t=u.length,r=0;r<t;r++){var y=u[r];y.style.display=!0==(d>=b&&d<=l)?"table-row":"none";y.cells.length>p&&(p=y.cells.length);"empty"!=y.className&&
e++;d++}b=a.selectedPage;c=a.numberOfPages;if(d=a.querySelector("tFoot a.first"))d.className=1<b?"not-number first":"not-number first disabled",d.index=1<b?1:-1;if(d=a.querySelector("tFoot a.previous"))d.className=1<b?"not-number previous":"not-number previous disabled",d.index=1<b?b-1:-1;if(d=a.querySelector("tFoot a.next"))d.className=b<c?"not-number next":"not-number next disabled",d.index=b<c?b+1:-1;if(d=a.querySelector("tFoot a.last"))d.className=b<c?"not-number last":"not-number last disabled",
d.index=b<c?c:-1;c=a.querySelectorAll("tFoot a.number");d=c.length;l=Math.min(a.numberFooterAnchors,d);l=Math.floor(l/2);h=b>l?l:b-1;l=b-h;h=b+(a.numberFooterAnchors-1-h);h>d&&(l-=h-d,h=d);for(s=1;s<=d;s++)c[s-1].className=(s==b?"number selected ":"number ")+(s>=l&&s<=h?"shown":"hidden");b=(b-1)*a.rowsPerPage+1;c=b+a.rowsPerPage-1>a.numberOfRows?a.numberOfRows:b+a.rowsPerPage-1;if(d=a.querySelector("tFoot span.details"))d.innerHTML=b+" - "+c+" of "+a.numberOfRows+" items.";a.numberOfRows=e;a.numberOfColumns=
p}function e(a){var b=a.querySelector("tFoot.pagination");b||(b=document.createElement("tFoot"),b.className="pagination",a.appendChild(b),a.navFooter=b);b.innerHTML="";var c=document.createElement("tr");b.appendChild(c);b=document.createElement("td");c.appendChild(b);b.colSpan=a.numberOfColumns;c=document.createElement("span");c.className="details";b.appendChild(c);c.innerHTML=(0<a.numberOfRows?1:0)+" - "+(a.numberOfRows>a.rowsPerPage?a.rowsPerPage:a.numberOfRows)+" of "+a.numberOfRows+" items.";
c=d(a,"<<","not-number first disabled",-1);b.appendChild(c);c=d(a,"<","not-number previous disabled",-1);b.appendChild(c);for(var e=a.numberOfPages,g=1;g<=e;g++)c=d(a,g,(1==g?"number selected ":"number ")+(g>a.numberFooterAnchors?"hidden":"shown"),g),b.appendChild(c);c=d(a,">",1<e?"not-number next":"not-number next disabled",1<e?2:-1);b.appendChild(c);c=d(a,">>",1<e?"not-number last":"not-number last disabled",1<e?e:-1);b.appendChild(c)}function b(b){var d=b.tHead,e=b.numberOfRows,f=0==e?1:Math.floor(Math.log(e)/
Math.LN10)+1;if(d&&1<f){var g=document.createElement("tr");g.className="select";d.insertBefore(g,d.firstChild);d=document.createElement("th");d.colSpan=b.numberOfColumns;g.appendChild(d);var l=document.createElement("span");l.className="show";d.appendChild(l);l.appendChild(document.createTextNode("Show "));g=document.createElement("select");d.appendChild(g);g.table=b;l=document.createElement("span");l.className="entries";d.appendChild(l);l.appendChild(document.createTextNode(" entries"));f=Math.pow(10,
f-1);for(d=1;4>=d;d++){l=f*d;if(l>e)break;a(g,l,l)}a(g,"all",e);g.onchange=function(){this.table.rowsPerPage=this.options[this.selectedIndex].value;c(this.table);b.changePage(1)}}}function a(a,b,c){var d=document.createElement("option");d.text=b;d.value=c;a.appendChild(d)}function d(a,b,c,d){var e=document.createElement("a");e.className=c;e.table=a;e.index=d;e.onclick=function(){this.table.changePage(this.index)};a=document.createTextNode(b);e.appendChild(a);return e}(function(){for(var a=document.querySelectorAll("table.pages"),
d=a.length,e=0;e<d;e++){var f=a[e];f.isPaged=!0;f.firstShownRow=0;f.numberFooterAnchors=5;for(var g=f.tBodies,d=g.length,l=0,h=0;h<d;h++)l+=g[h].rows.length;f.numberOfRows=l;g=0==f.numberOfRows?1:Math.floor(Math.log(f.numberOfRows)/Math.LN10)+1;f.rowsPerPage=Math.pow(10,g-1);c(f);b(f)}})()};
wesCountry.table.sort=new function(){function c(c){for(var b=c.tHead.rows,a=b.length,d=0;d<a;d++)if("select"!=b[d].className){b[d].className="sorter";for(var n=b[d].cells.length,m=0;m<n;m++){b[d].cells[m].table=c;b[d].cells[m].index=m;b[d].cells[m].sort="empty";var k=new Image;k.className="empty";b[d].cells[m].appendChild(k);b[d].cells[m].onclick=function(){h(this.table,this.index,this)}}}}function h(c,b,a){for(var d=[],h=c.tBodies.length,m=0;m<h;m++)for(var k=c.tBodies[m],f=0;f<k.rows.length;f++)d.push(k.rows[f]);
a.sort="empty"==a.sort||"down"==a.sort?"up":"down";d.sort(function(c,d){if("empty"==c.className||"empty"==d.className)return 1;c=c.cells[b].innerHTML.toString();d=d.cells[b].innerHTML.toString();return c<d?"up"==a.sort?-1:1:c>d?"up"==a.sort?1:-1:0});a.querySelector("img").className=a.sort;k=c.querySelectorAll("tHead tr.sorter th");h=k.length;for(m=0;m<h;m++)m!=b&&r(k[m]);h=c.tHead;for(m=c.tFoot;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(h);m&&c.appendChild(m);k=document.createElement("tbody");
c.appendChild(k);h=d.length;for(m=0;m<h;m++)k.appendChild(d[m]);c.changePage&&c.changePage(1)}function r(c){var b=c.querySelectorAll("img");b&&b.length&&0<b.length&&(b[0].className="empty");c.sort="empty"}(function(){for(var e=document.querySelectorAll("table.sortable"),b=e.length,a=0;a<b;a++)c(e[a])})()};
function SortedArray(){var c=0;this.array=[];for(var h=arguments.length;c<h;)this.insert(arguments[c++]);this.length=0;this.insert=function(c){var e=this.array,b=e.length;e.push(c);for(this.length=this.array.length;b;){c=b;var a=--b;if(e[c]<e[a]){var d=e[c];e[c]=e[a];e[a]=d}}return this};this.get=function(c){return this.array[c]};this.getArray=function(){return this.array};this.uniqueInsert=function(c){-1==this.search(c)&&this.insert(c)};this.search=function(c){for(var e=0,b=this.array,a=b.length;a>
e;){var d=(a+e)/2>>>0,h=b[d];if(h<c)e=d+1;else if(h>c)a=d;else return d}return-1};this.remove=function(c){c=this.search(c);0<=c&&this.array.splice(c,1);this.length=this.array.length;return this}}"undefined"===typeof exports&&(exports={});
var Selector=exports.Selector=function(c,h){function r(a,c,d,f,k){var l=document.createElement("ul");l.className=h["ul-class"];a.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0});for(var m=a.length,n=null,v=!1,z=[],E=0;E<m;E++){var C=a[E],G=C.children&&C.children.length?C.children.length:0,D=document.createElement("li");l.appendChild(D);D.code=C.code;D.liParent=c;D.data=C;D.isSelected=!1;var A=document.createElement("a");A.href="javascript: void(0)";A.value=C.label;-1!=h.selectedItems.indexOf(D.code)&&
(v=!0,z.push(A));null==k&&g.push(A);A.previousSiblingLink=f;A.nextSiblingLink=null;A.parentLink=k;f&&(f.nextSiblingLink=A);0==E&&(n=A);A.className="circleAndText";D.appendChild(A);A.liParent=D;A.onclick=function(a){b(this.liParent,h.callback);a&&a.stopPropagation()};var H=document.createElement("div");H.className=0<G?"plusOrMinus":"hidden-plusOrMinus";H.innerHTML="+";A.appendChild(H);0<G&&(H.onclick=function(a){e(this);a.stopPropagation()});A.plusOrMinus=H;A.onkeydown=function(a){if(13==a.keyCode)return b(this.liParent,
h.callback),a.stopPropagation(),!1;if(38==a.keyCode)return this.previousSiblingLink&&this.previousSiblingLink.focus(),a.stopPropagation(),!1;if(40==a.keyCode)return this.plusOrMinus.opened&&this.firstChildLink?this.firstChildLink.focus():this.nextSiblingLink?this.nextSiblingLink.focus():this.parentLink.nextSiblingLink&&this.parentLink.nextSiblingLink.focus(),a.stopPropagation(),!1;if(37==a.keyCode||39==a.keyCode)return a.stopPropagation(),e(this.plusOrMinus),a.keyCode=9,a.keyCode};var F=document.createElement("div");
F.className="circle";A.appendChild(F);f=document.createElement("div");f.className="title";A.appendChild(f);var I=document.createTextNode(C.label);f.appendChild(I);f=A;0<G&&(G=document.createElement("span"),G.className="empty-counter",F.appendChild(G),I=document.createTextNode("0"),G.appendChild(I),D.counter={div:G,value:0},F=r(C.children,D,d+1,f,A),D.appendChild(F.ul),A.firstChildLink=F.firstChildLink,H.childrenUl=F.ul,!0==F.selected&&(v=!0,H.innerHTML="-"),z=z.concat(F.selectedItems));D.childNumber=
C.children?C.children.length:0}1<d&&!1==v&&(l.style.display="none");return{ul:l,firstChildLink:n,selected:v,selectedItems:z}}function e(a){"+"==a.innerHTML?(a.innerHTML="&#8212;",a.childrenUl&&(a.childrenUl.style.display="block"),a.opened=!0):(a.innerHTML="+",a.childrenUl&&(a.childrenUl.style.display="none"),a.opened=!1)}function b(b,c){var d=!b.isSelected;d&&0<h.maxSelectedItems&&l.length>=h.maxSelectedItems||a(b,c,d)}function a(a,b,c){d(a,c);if(a.liParent){var e=a.liParent.counter.value,e=c?e+1:
e-1;n(a.liParent,e);c?e==a.liParent.childNumber&&(a.liParent.className="selected",a.liParent.isSelected=!0,m(a.liParent.code,!0)):(a.liParent.className="not-selected",a.liParent.isSelected=!1,m(a.liParent.code,!1))}0<a.childNumber&&n(a,c?a.childNumber:0);b&&b.call(a,a.data,l)}function d(a,b){"li"==a.tagName.toLowerCase()&&(a.isSelected=b,a.className=b?"selected":"not-selected",m(a.code,b),a.firstChild.title=a.firstChild.value+(b?" is selected":""));for(var c=a&&a.children&&a.children.length?a.children.length:
0,e=0;e<c;e++)d(a.children[e],b)}function n(a,b){var c=a.counter;c.value=b;c.div.innerHTML=c.value;c.div.className=0<c.value?"counter":"empty-counter";b=a.firstChild.value;a.firstChild.title=b+": "+c.value+(1!=c.value?" selected countries":" selected country")}function m(a,b){a&&(b?l.uniqueInsert(a):l.remove(a))}function k(a,b){if(b instanceof Array)return b;if("object"===typeof b){for(var c in b)a[c]=k(a[c],b[c]);return a}return b}var f={"ul-class":"default-selector",callback:null,maxSelectedItems:-1,
selectedItems:[]},g=[],l=new SortedArray,v=null;(function(){var a=h;if(a){"string"===typeof a&&(a={container:a});var b=JSON.parse(JSON.stringify(f)),d;for(d in a)b[d]=k(b[d],a[d]);a=b}else a=JSON.parse(JSON.stringify(f));h=a;a=r(c,null,1,null,null);v=a.ul;a=a.selectedItems;b=a.length;for(d=0;d<b;d++)a[d].onclick()})();this.render=function(){return v};this.clear=function(){for(var b=v.children.length,c=0;c<b;c++)a(v.children[c],null,!1)};this.selectAll=function(){for(var a=g.length,c=0;c<a;c++)b(g[c].liParent,
null)}};
