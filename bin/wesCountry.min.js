var jSVG=new function(){function b(n){function v(c,d,l,m){d=new b(d);var f;m=JSON.parse(JSON.stringify(m));if(l)for(f in l)m[f]=l[f];f=m;m={};for(var e in f)m[e]=new a(null,e,f[e]);d.attributes(m);c&&c.appendChild(d);return d}var e={width:500,height:500,version:"1.1"},c={fill:"black",stroke:"none","stroke-width":"1",x:"0",y:"0",width:"10",height:"10",r:"5",cx:"5",cy:"5",x1:0,x2:10,y1:0,y2:10},a=function(a,c,d){this.namespace=a;this.name=c;this.value=d},d={},l={},m="",h=void 0,f=[];this.svg=function(a){a||
(a={});return v(null,"svg",a,e)};this.elementByName=function(a,d){return v(this,a,d,c)};this.g=function(a){return v(this,"g",a,c)};this.path=function(a){return v(this,"path",a,c)};this.rectangle=function(a){return v(this,"rect",a,c)};this.circle=function(a){return v(this,"circle",a,c)};this.line=function(a){return v(this,"line",a,c)};this.text=function(a){var d=v(this,"text",a,c);d.value(a.value);return d};this.a=function(a,d){var l=v(this,"a",a,c);l.attribute("http://www.w3.org/1999/xlink","xlink:href",
d);return l};this.attribute=function(c,l,m){d[l]=new a(c,l,m);return this};this.attributes=function(a){d=a;return this};this.style=function(a){m=a;return this};this.value=function(a){h=a;return this};this.event=function(a,c){l[a]=c;return this};this.width=function(){return d.width.value};this.height=function(){return d.height.value};this.appendChild=function(a){f.push(a)};this.render=function(){var a=document.createElementNS("http://www.w3.org/2000/svg",n),c;for(c in d){var b=d[c];a.setAttributeNS(b.namespace,
b.name,b.value)}a.setAttributeNS(null,"style",m);for(var e in l)a[e]=l[e];for(c=0;c<f.length;c++)a.appendChild(f[c].render());h&&(c=document.createTextNode(h),a.appendChild(c));return a};this.toString=function(){var a="",c;for(c in d)var l=d[c],a=a+String.format(' {0}="{1}"',l.name,l.value);c="";for(l=0;l<f.length;l++)c+=f[l].toString();return String.format('<{0} xmlns="{1}" {2} style="{3}">{4}{5}</{0}>',n,"http://www.w3.org/2000/svg",a,m,c,h?h:"")}}return new b};
String.format=function(b){for(var n=1;n<arguments.length;n++)b=b.replace(RegExp("\\{"+(n-1)+"\\}","g"),arguments[n]);return b};String.prototype.toFirstUpperCase=function(){var b=this[0].toUpperCase(),n=this.substr(1);return b+n};"undefined"===typeof exports&&(exports={});if("undefined"===typeof wesCountry)var wesCountry={};
wesCountry.charts=new function(){function b(c,a){if(a instanceof Array)return a;if("object"===typeof a){for(var d in a)c[d]=b(c[d],a[d]);return c}return a}function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function v(c){if(e){var a=c?c:event;c=a.clientX;a=a.clientY;diffX=24;diffY=0;e.style.top=a-2+diffY+document.body.scrollTop+"px";e.style.left=c-2+diffX+document.body.scrollLeft+"px"}}this.defaultOptions={width:600,height:400,chartType:"bar",container:"body",margins:[10,
20,10,5],backgroundColour:"none",serieColours:["#FCD271","#FA5882","#2BBBD8","#102E37"],overColour:"#333",groupMargin:4,barMargin:8,sortSeries:!1,valueOnItem:{show:!0,margin:5,"font-family":"Helvetica","font-colour":"#aaa","font-size":"16px"},xAxis:{title:"Months",colour:"none",margin:10,tickColour:"none",values:["Jan","Feb","Mar","Apr","May"],"font-family":"Helvetica","font-colour":"#666","font-size":"16px"},yAxis:{title:"Values",colour:"none",margin:10,tickColour:"#ccc","font-family":"Helvetica",
"font-colour":"#aaa","font-size":"16px","from-zero":!1},series:[{name:"First",values:[-1,4,5,3,6],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Second",values:[1,7,5,6,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Third",values:[0,1,2,3,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es",
"http://www.google.es"]}],legend:{show:!0,itemSize:1,"font-colour":"#666","font-family":"Helvetica","font-size":"16px"},tooltip:{show:!0,style:{display:"none",padding:"0.8em 0.5em","font-size":"12px",border:"0.1em solid #ccc","background-color":"#fff",position:"absolute",color:"#000"}},events:{onmouseover:function(c,a,d){c=String.format("Series '{0}': ({1}, {2})",c,a,d);console.log(c);wesCountry.charts.showTooltip(c)},onmouseout:function(){wesCountry.charts.hideTooltip()},onclick:function(){}}};this.sortSeries=
function(c){c.sort(function(a,c){for(var l=a.values,b=c.values,e=Math.max(l.length,b.length),f=0,g=0;g<e;g++)(l[g]?l[g]:0)>(b[g]?b[g]:0)&&f++;return f>=e/2?-1:1});return c};this.getSVG=function(c){return jSVG.svg({width:c.width,height:c.height})};this.showLegend=function(c,a,d){for(var l=d.series.length,b=a.width-0.2*a.marginRight,e=0;e<l;e++){var f=a.marginTop+2.5*(a.legendItemSize+a.barMargin)*e;c.circle({cx:b,cy:f,r:a.legendItemSize}).style(String.format("fill: {0}",d.serieColours[e%d.serieColours.length]));
c.text({x:b-2*a.legendItemSize,y:f,value:d.series[e].name}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",d.legend["font-colour"],d.legend["font-family"],d.legend["font-size"]))}};this.mergeOptionsAndDefaultOptions=function(c,a){if(c){"string"===typeof c&&(c={container:c});var d=this.clone(a),l;for(l in c)d[l]=b(d[l],c[l]);c=d}else c=this.clone(a);return c};this.clone=function(c){if(null==c||"object"!=typeof c)return c;var a=c.constructor(),
d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);return a};this.setAxisY=function(c,a,d){c.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.yAxisMargin,y1:a.marginTop,y2:a.innerHeight+a.marginTop-a.xAxisMargin}).style(String.format("stroke: {0}",d.yAxis.colour));for(var l=a.ticksY+1,b=0;b<l;b++)c.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.innerWidth,y1:a.marginTop+b*a.yTickHeight,y2:a.marginTop+b*a.yTickHeight}).style(String.format("stroke: {0}",d.yAxis.tickColour));for(b=0;b<l;b++)c.text({x:a.marginLeft+
a.yAxisMargin/1.8,y:a.marginTop+b*a.yTickHeight,value:(a.maxValue-b*a.valueInc).toFixed(0)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",d.yAxis["font-colour"],d.yAxis["font-family"],d.yAxis["font-size"]));l=a.marginLeft;a=a.marginTop+(a.innerHeight-a.xAxisMargin)/2;c.text({x:l,y:a,value:d.yAxis.title,transform:String.format("rotate(-90 {0}, {1})",l,a)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",d.yAxis["font-colour"],
d.yAxis["font-family"],d.yAxis["font-size"]))};this.setAxisX=function(c,a,d){var b=a.marginTop+a.innerHeight-a.xAxisMargin+a.minValue/(a.maxValue-a.minValue)*(a.innerHeight-a.xAxisMargin);c.line({x1:a.marginLeft+a.yAxisMargin,x2:a.marginLeft+a.innerWidth,y1:b,y2:b}).style(String.format("stroke: {0}",d.xAxis.colour));for(var b=a.maxValueLength,e=0;e<b;e++){var h=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*e;c.line({x1:h,x2:h,y1:a.marginTop,y2:a.innerHeight+
a.marginTop-a.xAxisMargin}).style(String.format("stroke: {0}",d.xAxis.tickColour));c.text({x:h,y:a.marginTop+a.innerHeight-a.xAxisMargin/2,value:d.xAxis.values[e]?d.xAxis.values[e]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",d.xAxis["font-colour"],d.xAxis["font-family"],d.xAxis["font-size"]))}c.text({x:a.marginLeft+a.yAxisMargin+(a.innerWidth-a.yAxisMargin)/2,y:a.marginTop+a.innerHeight+a.xAxisMargin/2,value:d.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
d.xAxis["font-colour"],d.xAxis["font-family"],d.xAxis["font-size"]))};this.getMaxAndMinValuesAxisY=function(c){for(var a=0,d=Number.MAX_VALUE,b=c.series.length,e=null,h=null,f=0,g=0;g<b;g++){e=c.series[g].values.length;e>f&&(f=e);for(var k=0;k<e;k++)h=c.series[g].values[k],h instanceof Array&&(h=h[1]?h[1]:0),h>a&&(a=h),h<d&&(d=h)}!0==c.yAxis["from-zero"]&&0<d&&(d=0);c=this.getNearestNumber(d,a);return{max:c.max,min:c.min,valueLength:f,inc:c.inc}};this.setBackground=function(c,a,d){c.rectangle({x:0,
y:0,width:a.width,height:a.height}).style(String.format("fill: {0}",d.backgroundColour))};this.getNearestNumber=function(c,a){var d;d=a-c;var b=0;15>d?b=1:30>d?b=5:(d=1+Math.floor(Math.log(d)/Math.log(10)),b=Math.pow(10,d-1));d=b;return{max:Math.ceil(a/d)*d,min:Math.floor(c/d)*d,inc:d}};this.guid=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};var e=null;this.createTooltip=function(c){if(!0==c.tooltip.show){if(e=document.getElementById("wesCountryTooltip"),!e){e=document.createElement("span");
e.id="wesCountryTooltip";document.body.appendChild(e);var a="",d;for(d in c.tooltip.style)a+=String.format("{0}:{1};",d,c.tooltip.style[d]);e.setAttribute("style",a)}}else e=null};this.showTooltip=function(c){e&&(v(),e.innerHTML=c,e.style.display="block",window.onscroll=v)};this.hideTooltip=function(){e&&(e.style.display="none")}};
wesCountry.charts.barChart=function(b){function n(b,e){var c=b.width(),a=b.height(),d=a*e.margins[0]/100,l=c*e.margins[1]/100,m=a*e.margins[2]/100,h=c*e.margins[3]/100,f=e.yAxis.margin*c/100,g=e.xAxis.margin*a/100,k=c-h-l,p=a-d-m,q=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=q.max,u=0<q.min?0:q.min,t=q.valueLength,r=(s-u)/q.inc,q=(k-f)/q.valueLength,n=e.groupMargin*q/100,q=q-2*n,w=q/e.series.length,x=e.barMargin*w/100;return{width:c,height:a,marginTop:d,marginRight:l,marginBottom:m,marginLeft:h,
innerWidth:k,innerHeight:p,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:r,yTickHeight:0!=r?(p-g)/r:0,xTickWidth:q,valueInc:0!=r?(s-u)/r:0,barMargin:x,groupMargin:n,barWidth:w-2*x,legendItemSize:e.legend.itemSize*c/100}}return function(){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);b.yAxis["from-zero"]=!0;b.sortSeries&&(b.series=wesCountry.charts.sortSeries(b.series));var v=wesCountry.charts.getSVG(b),e=n(v,b),c=v.g();wesCountry.charts.setBackground(c,
e,b);wesCountry.charts.setAxisY(c,e,b);wesCountry.charts.setAxisX(c,e,b);for(var a=e.maxValueLength,d=b.series.length,l=e.barWidth,m=e.innerHeight-e.xAxisMargin,h=e.minValue/(e.maxValue-e.minValue)*m,f=0;f<a;f++)for(var g=0;g<d;g++){var k=b.series[g].name,p=b.series[g].values[f],q=b.series[g].urls?b.series[g].urls[f]:"",s=b.xAxis.values[g];p||(p=0);var u=e.marginLeft+e.yAxisMargin+e.groupMargin*(2*f+1)+e.barMargin+e.xTickWidth*f+(l+2*e.barMargin)*g,t=0<=p?e.marginTop+e.innerHeight-e.xAxisMargin+h-
p/(e.maxValue-e.minValue)*m:e.marginTop+e.innerHeight-e.xAxisMargin+h,r=Math.abs(p)/(e.maxValue-e.minValue)*m,k={x:u,y:t,width:l,height:r,serie:k,value:p,pos:s},s=String.format("fill: {0}",b.serieColours[g]),r=function(){this.colour=this.style.fill;this.style.fill=b.overColour;b.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},A=function(){this.style.fill=this.colour;b.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
w=function(){this.style.fill=this.colour;b.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};q&&""!=q?c.a({},q?q:"").rectangle(k).style(s).event("onmouseover",r).event("onmouseout",A).event("onclick",w):c.rectangle(k).style(s).event("onmouseover",r).event("onmouseout",A).event("onclick",w);!0==b.valueOnItem.show&&c.text({x:u+l/2,y:t-b.height/100*b.valueOnItem.margin,value:p.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
b.valueOnItem["font-colour"],b.valueOnItem["font-family"],b.valueOnItem["font-size"]))}b.legend.show&&wesCountry.charts.showLegend(c,e,b);wesCountry.charts.createTooltip(b);return v}()};wesCountry.charts.lineChart=function(b){return this.generateLineChart(b,!1)};wesCountry.charts.areaChart=function(b){return this.generateLineChart(b,!0)};
wesCountry.charts.generateLineChart=function(b,n){function v(c,a,d,b){return a.marginTop+a.innerHeight-a.xAxisMargin+d-c/(a.maxValue-a.minValue)*b}function e(c,a){var d=c.width(),b=c.height(),e=b*a.margins[0]/100,h=d*a.margins[1]/100,f=b*a.margins[2]/100,g=d*a.margins[3]/100,k=a.yAxis.margin*d/100,p=a.xAxis.margin*b/100,q=d-g-h,s=b-e-f,u=wesCountry.charts.getMaxAndMinValuesAxisY(a),t=u.max,r=u.min,v=u.valueLength;r==t&&(r=0<=r?0:r-2,t+=2);var n=(t-r)/u.inc,u=(q-k)/u.valueLength,x=a.groupMargin*u/
100,u=u-2*x,B=u/a.series.length,y=a.barMargin*B/100;return{width:d,height:b,marginTop:e,marginRight:h,marginBottom:f,marginLeft:g,innerWidth:q,innerHeight:s,yAxisMargin:k,xAxisMargin:p,maxValue:t,minValue:r,maxValueLength:v,ticksY:n,yTickHeight:0!=n?(s-p)/n:0,xTickWidth:u,valueInc:0!=n?(t-r)/n:0,barMargin:y,groupMargin:x,barWidth:B-2*y,legendItemSize:a.legend.itemSize*d/100}}return function(){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);b.sortSeries&&(b.series=
wesCountry.charts.sortSeries(b.series));var c=wesCountry.charts.getSVG(b),a=e(c,b),d=c.g();wesCountry.charts.setBackground(d,a,b);wesCountry.charts.setAxisY(d,a,b);wesCountry.charts.setAxisX(d,a,b);for(var l=b.series.length,m=a.maxValueLength,h=a.innerHeight-a.xAxisMargin,f=a.minValue/(a.maxValue-a.minValue)*h,g=0;g<l;g++){var k="";if(n)var p=d.path();for(var q=Math.max(0,a.minValue),q=v(q,a,f,h),s="l"+wesCountry.charts.guid(),u=0;u<m;u++){var t=b.series[g].values[u],r=0<u?b.series[g].values[u-1]:
0,A=b.series[g].urls?b.series[g].urls[u]:"",w=b.series[g].name,x=b.xAxis.values[u];t||(t=0);r||(r=0);var B=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*u,y=v(t,a,f,h),E=a.marginLeft+a.yAxisMargin+a.groupMargin+a.xTickWidth/2+(a.xTickWidth+2*a.groupMargin)*(u-1),r=v(r,a,f,h),w={cx:B,cy:y,r:5,"class":s,serie:w,value:t,pos:x},x=String.format("fill: {0}",b.serieColours[g%b.serieColours.length]),C=function(a,c){for(var d=a.getAttribute("class"),d=a.parentNode.querySelectorAll("line."+
d),b=d.length,e=0;e<b;e++)d[e].setAttribute("stroke-width",c)},G=function(){this.setAttribute("r",8);C(this,2);b.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},D=function(){this.setAttribute("r",5);C(this,1);b.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},z=function(){this.setAttribute("r",5);C(this,1);b.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};
A&&""!=A?d.a({},A?A:"").circle(w).style(x).event("onmouseover",G).event("onmouseout",D).event("onclick",z):d.circle(w).style(x).event("onmouseover",G).event("onmouseout",D).event("onclick",z);!0==b.valueOnItem.show&&d.text({x:B,y:y-b.height/100*b.valueOnItem.margin,value:0==t?"0":t.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",b.valueOnItem["font-colour"],b.valueOnItem["font-family"],b.valueOnItem["font-size"]));0<u?(d.line({x1:E,
x2:B,y1:r,y2:y,"stroke-width":1,"class":s}).style(String.format("stroke: {0}",b.serieColours[g%b.serieColours.length])).event("onmouseover",function(){C(this,2)}).event("onmouseout",function(){C(this,1)}),k+=String.format(" L{0} {1}",B,y)):k=String.format("M{0} {1} L{2} {3}",B,q,B,y)}k+=String.format(" L{0} {1} Z",B,q);n&&p.attribute(null,"d",k).style(String.format("stroke: {0}; fill: {0}; opacity: 0.5",b.serieColours[g%b.serieColours.length]))}b.legend.show&&wesCountry.charts.showLegend(d,a,b);wesCountry.charts.createTooltip(b);
return c}()};
wesCountry.charts.pieChart=function(b){function n(b,e){var c=b.width(),a=b.height(),d=a*e.margins[0]/100,l=c*e.margins[1]/100,m=a*e.margins[2]/100,h=c*e.margins[3]/100,f=e.yAxis.margin*c/100,g=e.xAxis.margin*a/100,k=c-h-l,p=a-d-m,q=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=q.max,u=q.min,t=q.valueLength,r=(s-u)/q.inc,q=(k-f)/q.valueLength,n=e.groupMargin*q/100,q=q-2*n,w=q/e.series.length,x=e.barMargin*w/100;return{width:c,height:a,marginTop:d,marginRight:l,marginBottom:m,marginLeft:h,innerWidth:k,
innerHeight:p,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:r,yTickHeight:0!=r?(p-g)/r:0,xTickWidth:q,valueInc:0!=r?(s-u)/r:0,barMargin:x,groupMargin:n,barWidth:w-2*x,legendItemSize:e.legend.itemSize*c/100}}return function(){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);b.sortSeries&&(b.series=wesCountry.charts.sortSeries(b.series));var v=wesCountry.charts.getSVG(b),e=n(v,b),c=v.g();wesCountry.charts.setBackground(c,e,b);var a=e.maxValueLength;
if(1==a)var d=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-2*e.xAxisMargin)/2,l=e.innerWidth/2,m=e.innerHeight/2,h=0,f=1;else 2==a?(d=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-2*e.xAxisMargin)/4,l=e.marginLeft+d,m=e.innerHeight/2,h=e.innerWidth-2*d,f=2):(8<a&&(a=8),d=Math.min(e.innerWidth,e.innerHeight-2*e.xAxisMargin)/4,f=Math.ceil(a/2),l=e.marginLeft+d,m=e.marginTop+d,h=(e.innerWidth-2*f*d)/(f-1)+2*d);for(var g=0;g<a;g++){if(g<f)var k=l+h*g,p=m;else k=a-f,p=(e.innerWidth-2*k*d)/
(k<f?k+1:k-1),h=p+2*d,k=e.marginLeft+(k<f?p:0)+d+h*(g%f),p=e.marginTop+e.innerHeight-e.xAxisMargin-d;c.text({x:k,y:p+d+e.xAxisMargin/2,value:b.xAxis.values[g]?b.xAxis.values[g]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",b.xAxis["font-colour"],b.xAxis["font-family"],b.xAxis["font-size"]));for(var q=function(){this.colour=this.style.fill;this.style.fill=b.overColour;b.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),
this.getAttribute("value"))},s=function(){this.style.fill=this.colour;b.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},u=function(){this.style.fill=this.colour;b.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},t=0,r=0,A=b.series.length,w=0;w<A;w++){var x=Math.abs(b.series[w].values[g]);x||(x=0);0!=x&&r++;t+=x}for(var B=[],w=0;w<A;w++)(x=Math.abs(2*(b.series[w].values[g]/t)*Math.PI))||(x=0),B[w]=x;if(1==
r){for(var y="",r=x=t="",w=0;w<A;w++)if(0!=B[w]){y=b.serieColours[w];t=b.series[w].name;x=Math.abs(b.series[0].values[w]).toFixed(2);r=b.xAxis.values[g];break}c.circle({cx:k,cy:p,r:d,serie:t,value:x,pos:r}).event("onmouseover",q).event("onmouseout",s).event("onclick",u).style(String.format("fill: {0}",y))}else for(w=y=0;w<A;w++){var E=y+B[w],x=Math.abs(b.series[w].values[g]).toFixed(2),t=b.series[w].name,r=b.xAxis.values[g],C=k+d*Math.sin(y),G=p-d*Math.cos(y),D=k+d*Math.sin(E),z=p-d*Math.cos(E),H=
y+(E-y)/2,F=d+d/100*b.valueOnItem.margin,I=k+F*Math.sin(H),H=p-F*Math.cos(H),F=0;E-y>Math.PI&&(F=1);c.path({d:"M "+k+","+p+" L "+C+","+G+" A "+d+","+d+" 0 "+F+" 1 "+D+","+z+" Z",serie:t,value:x,pos:r}).event("onmouseover",q).event("onmouseout",s).event("onclick",u).style(String.format("fill: {0}",b.serieColours[w]));!0==b.valueOnItem.show&&c.text({x:I,y:H,value:x}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",b.valueOnItem["font-colour"],
b.valueOnItem["font-family"],b.valueOnItem["font-size"]));y=E}}b.legend.show&&wesCountry.charts.showLegend(c,e,b);wesCountry.charts.createTooltip(b);return v}()};
wesCountry.charts.polarChart=function(b){function n(b,e){var c=b.width(),a=b.height(),d=a*e.margins[0]/100,l=c*e.margins[1]/100,m=a*e.margins[2]/100,h=c*e.margins[3]/100,f=e.yAxis.margin*c/100,g=e.xAxis.margin*a/100,k=c-h-l,p=a-d-m,q=wesCountry.charts.getMaxAndMinValuesAxisY(e),s=q.max,u=0<q.min?0:q.min,t=q.valueLength,r=(s-u)/q.inc,q=(k-f)/q.valueLength,n=e.groupMargin*q/100,q=q-2*n,w=q/e.series.length,x=e.barMargin*w/100;return{width:c,height:a,marginTop:d,marginRight:l,marginBottom:m,marginLeft:h,
innerWidth:k,innerHeight:p,yAxisMargin:f,xAxisMargin:g,maxValue:s,minValue:u,maxValueLength:t,ticksY:r,yTickHeight:0!=r?(p-g)/r:0,xTickWidth:q,valueInc:0!=r?(s-u)/r:0,barMargin:x,groupMargin:n,barWidth:w-2*x,legendItemSize:e.legend.itemSize*c/100}}return function(){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);var v=wesCountry.charts.getSVG(b),e=n(v,b),c=v.g();wesCountry.charts.setBackground(c,e,b);for(var a=Math.min(e.innerWidth-2*e.yAxisMargin,e.innerHeight-
2*e.xAxisMargin)/2,d=e.maxValueLength,l=e.width/2,m=e.height/2,h=[],f=0;f<d;f++)h.push({x:l+a*Math.cos(2*Math.PI*f/d-Math.PI/2),y:m+a*Math.sin(2*Math.PI*f/d-Math.PI/2)});for(f=0;f<d;f++){var g=h[f];c.line({x1:l,y1:m,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",b.yAxis.tickColour))}for(f=0;f<d;f++){var g=l+(a+e.xAxisMargin/2)*Math.cos(2*Math.PI*f/d-Math.PI/2),k=m+(a+e.xAxisMargin/2)*Math.sin(2*Math.PI*f/d-Math.PI/2),p=b.xAxis.values[f]?b.xAxis.values[f]:"";c.text({x:g,y:k,value:p}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
b.xAxis["font-colour"],b.xAxis["font-family"],b.xAxis["font-size"]))}for(var q=e.maxValue,s=e.minValue,q=5*Math.ceil(q/5),s=5*Math.floor(s/5),u=a/5,p=(q-s)/5,f=0;5>=f;f++){h=[];g=u*f;c.text({x:l-e.xAxisMargin/2,y:m-g,value:s+f*p}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",b.yAxis["font-colour"],b.yAxis["font-family"],b.yAxis["font-size"]));for(var t=0;t<d;t++)h.push({x:l+g*Math.cos(2*Math.PI*t/d-Math.PI/2),y:m+g*Math.sin(2*Math.PI*t/d-
Math.PI/2)});for(t=0;t<d;t++){var g=h[t],r=0==t?h[d-1]:h[t-1];c.line({x1:r.x,y1:r.y,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",b.yAxis.tickColour))}}r=Math.abs(s/(q-s))*a;u=b.series.length;h=[];for(f=0;f<u;f++)for(h[f]=[],t=0;t<d;t++)(p=b.series[f].values[t])||(p=0),p=0>p?r-Math.abs(p/s)*r:p/q*(a-r)+r,g=l+p*Math.cos(2*Math.PI*t/d-Math.PI/2),k=m+p*Math.sin(2*Math.PI*t/d-Math.PI/2),h[f].push({x:g,y:k});for(var A=function(a,c){for(var b=a.getAttribute("class"),b=a.parentNode.querySelectorAll("line."+
b),d=b.length,e=0;e<d;e++)b[e].setAttribute("stroke-width",c)},a=function(){this.setAttribute("r",8);A(this,2);b.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},l=function(){this.setAttribute("r",5);A(this,1);b.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},m=function(){this.setAttribute("r",5);A(this,1);b.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
f=0;f<u;f++)for(q="l"+wesCountry.charts.guid(),t=0;t<d;t++)g=h[f][t],r=0==t?h[f][d-1]:h[f][t-1],p=b.series[f].values[t],c.circle({cx:g.x,cy:g.y,r:5,serie:b.series[f].name,value:p,pos:b.xAxis.values[t],"class":q}).style(String.format("fill: {0}",b.serieColours[f%b.serieColours.length])).event("onmouseover",a).event("onmouseout",l).event("onclick",m),c.line({x1:r.x,y1:r.y,x2:g.x,y2:g.y,"class":q}).style(String.format("stroke: {0};",b.serieColours[f%b.serieColours.length]));b.legend.show&&wesCountry.charts.showLegend(c,
e,b);wesCountry.charts.createTooltip(b);return v}()};
wesCountry.charts.scatterPlot=function(b){function n(b,c){var a=b.width(),d=b.height(),l=d*c.margins[0]/100,m=a*c.margins[1]/100,h=d*c.margins[2]/100,f=a*c.margins[3]/100,g=c.yAxis.margin*a/100,k=c.xAxis.margin*d/100,p=a-f-m,q=d-l-h,s=wesCountry.charts.getMaxAndMinValuesAxisY(c),u=s.max,t=s.min,r=s.valueLength,n=(u-t)/s.inc,s=(p-g)/s.valueLength,v=c.groupMargin*s/100,s=s-2*v,x=s/c.series.length,B=c.barMargin*x/100;return{width:a,height:d,marginTop:l,marginRight:m,marginBottom:h,marginLeft:f,innerWidth:p,
innerHeight:q,yAxisMargin:g,xAxisMargin:k,maxValue:u,minValue:t,maxValueLength:r,ticksY:n,yTickHeight:0!=n?(q-k)/n:0,xTickWidth:s,valueInc:0!=n?(u-t)/n:0,barMargin:B,groupMargin:v,barWidth:x-2*B,legendItemSize:c.legend.itemSize*a/100}}function v(b,c,a){var d=c.marginTop+c.innerHeight-c.xAxisMargin+c.minValue/(0!=c.maxValue-c.minValue?c.maxValue-c.minValue:1)*(c.innerHeight-c.xAxisMargin);b.line({x1:c.marginLeft+c.yAxisMargin,x2:c.marginLeft+c.innerWidth,y1:d,y2:d}).style(String.format("stroke: {0}",
a.xAxis.colour));for(var d=0,l=Number.MAX_VALUE,m=a.series.length,h=null,f=null,g=0;g<m;g++)for(var h=a.series[g].values.length,k=0;k<h;k++)f=a.series[g].values[k][0]?a.series[g].values[k][0]:0,f>d&&(d=f),f<l&&(l=f);for(var d=wesCountry.charts.getNearestNumber(l,d),d={max:d.max,min:d.min,inc:d.inc},l=d.max,m=d.min,h=d.valueLength,f=(l-m)/d.inc,g=(c.innerWidth-c.yAxisMargin)/f,k=d.inc,p=f+1,q=0;q<p;q++){var s=c.marginLeft+c.yAxisMargin+g*q;b.line({x1:s,x2:s,y1:c.marginTop,y2:c.innerHeight+c.marginTop-
c.xAxisMargin}).style(String.format("stroke: {0}",a.xAxis.tickColour));b.text({x:s,y:c.marginTop+c.innerHeight-c.xAxisMargin/2,value:m+k*q}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]))}b.text({x:c.marginLeft+c.yAxisMargin+(c.innerWidth-c.yAxisMargin)/2,y:c.marginTop+c.innerHeight+c.xAxisMargin/2,value:a.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]));return{maxAndMinValues:d,maxValue:l,minValue:m,maxValueLength:h,ticksX:f,xTickWidth:g,incX:k}}return function(){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);var e=wesCountry.charts.getSVG(b),c=n(e,b),a=e.g();wesCountry.charts.setBackground(a,c,b);wesCountry.charts.setAxisY(a,c,b);var d=v(a,c,b),l=b.series.length,m=c.innerHeight-c.xAxisMargin,h=c.innerWidth-c.yAxisMargin,f=0;0>=c.minValue&&
0!=c.maxValue-c.minValue&&(f=c.minValue/(c.maxValue-c.minValue)*m);var g=0;0>=d.minValue&&(g=d.xTickWidth*Math.abs(d.minValue));for(var k=function(){this.colour=this.style.fill;this.style.fill=b.overColour;b.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},p=function(){this.style.fill=this.colour;b.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},q=function(){this.style.fill=this.colour;b.events.onclick(this.getAttribute("serie"),
this.getAttribute("pos"),this.getAttribute("value"))},s=0;s<l;s++)for(var u=b.series[s].values,t=u.length,r=0;r<t;r++){var A=u[r][0]?u[r][0]:0,w=0,x=b.series[s].values[r],B=b.series[s].name,y=A;0<r&&(w=u[r-1][0]?u[r-1][0]:0);A||(A=0);w||(w=0);var w=u[r][1]?u[r][1]:0,E=0;0<r&&(E=u[r-1][1]?u[r-1][1]:0);w||(w=0);E||(E=0);a.circle({cx:c.marginLeft+c.yAxisMargin+g+(0==d.maxValue-d.minValue?0:(A-d.minValue)/(d.maxValue-d.minValue))*h,cy:c.marginTop+c.innerHeight-c.xAxisMargin+f-(0==c.maxValue-c.minValue?
1:(w-c.minValue)/(c.maxValue-c.minValue))*m,r:5,serie:B,value:x,pos:y}).style(String.format("fill: {0}",b.serieColours[s%b.serieColours.length])).event("onmouseover",k).event("onmouseout",p).event("onclick",q)}b.legend.show&&wesCountry.charts.showLegend(a,c,b);wesCountry.charts.createTooltip(b);return e}()};
wesCountry.charts.chart=function(b){b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);var n;switch(b.chartType){case "bar":n=this.barChart(b);break;case "line":n=this.lineChart(b);break;case "pie":n=this.pieChart(b);break;case "area":n=this.areaChart(b)}document.querySelector(b.container).appendChild(n.render())};
wesCountry.charts.multiChart=function(b){function n(){var a=d.querySelector(".active").innerHTML.toLowerCase();b.chartType=a;b.container=".chartDiv";wesCountry.charts.chart(b)}function v(){document.querySelector(".active");document.querySelector(".chartDiv").innerHTML="";n()}function e(){for(var a=this.innerHTML,c=document.querySelector(".active"),b=document.querySelectorAll(".inactive"),d=b.length,e=0;e<d;e++)b[e].className=a===b[e].innerHTML?"active":"inactive";a!==c.innerHTML&&(c.className="inactive");
v()}function c(){for(var a=clone(seriesSave),c=document.querySelectorAll(".seriesSelector input"),d=a.length,e=0;e<d;e++)c[e].checked||delete a[e];c=[];for(e=0;e<d;e++)void 0!==a[e]&&c.push(a[e]);b.series=c;v()}b=wesCountry.charts.mergeOptionsAndDefaultOptions(b,wesCountry.charts.defaultOptions);seriesSave=wesCountry.charts.clone(b.series);var a=b.chartType,a=a instanceof Array?a:[a],d=document.querySelector(b.container);(function(){var c=document.createElement("div");c.className="chartSelector";
for(var b=document.createElement("ul"),h=0;h<a.length;h++){var f=document.createElement("li"),g=document.createElement("a");g.className="inactive";g.onclick=e;g.innerHTML=a[h].toFirstUpperCase();f.appendChild(g);b.appendChild(f)}c.appendChild(b);c.querySelector("li a").className="active";d.appendChild(c)})();(function(){var a=document.createElement("div");a.className="seriesSelector";for(var b=0;b<seriesSave.length;b++){var e=document.createElement("input"),f=document.createElement("label");e.id=
seriesSave[b].name+"Checkbox"+wesCountry.charts.guid();e.type="checkbox";e.className="checks";e.onchange=c;e.checked=!0;f.for=e.id;f.innerHTML=seriesSave[b].name;a.appendChild(e);a.appendChild(f)}d.appendChild(a)})();(function(){var a=document.createElement("div");a.className="chartDiv";d.appendChild(a);n()})()};"undefined"===typeof wesCountry&&(wesCountry={});
wesCountry.data=new function(){var b=null,n={},v=[];this.parseJSON=function(c){var a=function(a){return a.indicatorCode===m};n=c;c=n.data;for(var d=new HashTable,l=0;l<c.length;l++){var m=c[l].indicatorCode;if(!d.hasItem(m)){for(var h=c.filter(a),h=h.sort(e),f=new HashTable,g=0;g<h.length;g++){if(f.hasItem(h[g].countryName)){var k=f.getItem(h[g].countryName);k.push(parseFloat(h[g].value))}else k=[parseFloat(h[g].value)];f.setItem(h[g].countryName,k)}d.setItem(c[l].indicatorCode,f)}}b=d;return this};
this.parseTable=function(c){for(var a=document.querySelectorAll(".graphs"),b=0;b<a.length;b++){for(var e=a[b].querySelectorAll("th"),m=a[b].querySelectorAll("tr"),h=[],f=1;f<m.length;f++){for(var g={},k=m[f].querySelectorAll("td"),p=0;p<k.length;p++)g[e[p].className]=k[p].innerHTML;h.push(g)}c.data=h;this.parseJSON(c).iterate()}};this.iterate=function(){function c(){document.querySelector(".chartDiv").remove();document.querySelector(".seriesSelector").remove();document.querySelector(".chartSelector").remove();
a()}function a(){n.series=v[e.selectedIndex];wesCountry.charts.multiChart(JSON.parse(JSON.stringify(n)))}if(null!==b){var d=document.createElement("div");d.className="indicatorSelector";document.querySelector(n.container).appendChild(d);var e=document.createElement("select");d.appendChild(e);e.onchange=c;var d=b.keys(),d=d.array,m;for(m in d){var h=b.getItem(d[m]).keys().array,f=[],g;for(g in h)f.push({name:h[g],values:b.getItem(d[m]).getItem(h[g])});v.push(f);h=document.createElement("option");h.innerHTML=
d[m];e.appendChild(h)}a()}};var e=function(c,a){return c.year-a.year}};"undefined"===typeof wesCountry&&(wesCountry={});wesCountry.table={};
wesCountry.table.pages=new function(){function b(a){for(var c=a.querySelectorAll("tr.empty"),b=c.length,d=0;d<b;d++)c[d].parentNode.removeChild(c[d]);a.numberOfPages=Math.ceil(a.numberOfRows/a.rowsPerPage);var c=a.numberOfPages*a.rowsPerPage,b=0<a.numberOfColumns?a.numberOfColumns:1,g=a.tBodies;if(1<a.numberOfPages&&c>a.numberOfRows&&0<g.length)for(var k=a.numberOfRows;c>k;){var p=document.createElement("tr");p.className="empty";for(d=0;d<b;d++){var q=document.createElement("td");q.innerHTML="&nbsp";
p.appendChild(q)}g[0].appendChild(p);k++}a.selectedPage=1;v(a);a.changePage=n;a.reloadPage=function(){v(this)};e(a)}function n(a){a>this.numberOfPages||1>a||(this.firstShownRow=(a-1)*this.rowsPerPage,this.selectedPage=a,v(this))}function v(a){for(var c=a.firstShownRow,b=a.tBodies,d=0,e=0,k=c+1*a.rowsPerPage-1,p=b.length,q=0,s=0;s<p;s++)for(var u=b[s].rows,t=u.length,n=0;n<t;n++){var v=u[n];v.style.display=!0==(d>=c&&d<=k)?"table-row":"none";v.cells.length>q&&(q=v.cells.length);"empty"!=v.className&&
e++;d++}c=a.selectedPage;b=a.numberOfPages;if(d=a.querySelector("tFoot a.first"))d.className=1<c?"not-number first":"not-number first disabled",d.index=1<c?1:-1;if(d=a.querySelector("tFoot a.previous"))d.className=1<c?"not-number previous":"not-number previous disabled",d.index=1<c?c-1:-1;if(d=a.querySelector("tFoot a.next"))d.className=c<b?"not-number next":"not-number next disabled",d.index=c<b?c+1:-1;if(d=a.querySelector("tFoot a.last"))d.className=c<b?"not-number last":"not-number last disabled",
d.index=c<b?b:-1;b=a.querySelectorAll("tFoot a.number");d=b.length;k=Math.min(a.numberFooterAnchors,d);k=Math.floor(k/2);p=c>k?k:c-1;k=c-p;p=c+(a.numberFooterAnchors-1-p);p>d&&(k-=p-d,p=d);for(s=1;s<=d;s++)b[s-1].className=(s==c?"number selected ":"number ")+(s>=k&&s<=p?"shown":"hidden");c=(c-1)*a.rowsPerPage+1;b=c+a.rowsPerPage-1>a.numberOfRows?a.numberOfRows:c+a.rowsPerPage-1;if(d=a.querySelector("tFoot span.details"))d.innerHTML=c+" - "+b+" of "+a.numberOfRows+" items.";a.numberOfRows=e;a.numberOfColumns=
q}function e(a){var c=a.querySelector("tFoot.pagination");c||(c=document.createElement("tFoot"),c.className="pagination",a.appendChild(c),a.navFooter=c);c.innerHTML="";var b=document.createElement("tr");c.appendChild(b);c=document.createElement("td");b.appendChild(c);c.colSpan=a.numberOfColumns;b=document.createElement("span");b.className="details";c.appendChild(b);b.innerHTML=(0<a.numberOfRows?1:0)+" - "+(a.numberOfRows>a.rowsPerPage?a.rowsPerPage:a.numberOfRows)+" of "+a.numberOfRows+" items.";
b=d(a,"<<","not-number first disabled",-1);c.appendChild(b);b=d(a,"<","not-number previous disabled",-1);c.appendChild(b);for(var e=a.numberOfPages,g=1;g<=e;g++)b=d(a,g,(1==g?"number selected ":"number ")+(g>a.numberFooterAnchors?"hidden":"shown"),g),c.appendChild(b);b=d(a,">",1<e?"not-number next":"not-number next disabled",1<e?2:-1);c.appendChild(b);b=d(a,">>",1<e?"not-number last":"not-number last disabled",1<e?e:-1);c.appendChild(b)}function c(c){var d=c.tHead,e=c.numberOfRows,f=0==e?1:Math.floor(Math.log(e)/
Math.LN10)+1;if(d&&1<f){var g=document.createElement("tr");g.className="select";d.insertBefore(g,d.firstChild);d=document.createElement("th");d.colSpan=c.numberOfColumns;g.appendChild(d);var k=document.createElement("span");k.className="show";d.appendChild(k);k.appendChild(document.createTextNode("Show "));g=document.createElement("select");d.appendChild(g);g.table=c;k=document.createElement("span");k.className="entries";d.appendChild(k);k.appendChild(document.createTextNode(" entries"));f=Math.pow(10,
f-1);for(d=1;4>=d;d++){k=f*d;if(k>e)break;a(g,k,k)}a(g,"all",e);g.onchange=function(){this.table.rowsPerPage=this.options[this.selectedIndex].value;b(this.table);c.changePage(1)}}}function a(a,c,b){var d=document.createElement("option");d.text=c;d.value=b;a.appendChild(d)}function d(a,c,b,d){var e=document.createElement("a");e.className=b;e.table=a;e.index=d;e.onclick=function(){this.table.changePage(this.index)};a=document.createTextNode(c);e.appendChild(a);return e}(function(){for(var a=document.querySelectorAll("table.pages"),
d=a.length,e=0;e<d;e++){var f=a[e];f.isPaged=!0;f.firstShownRow=0;f.numberFooterAnchors=5;for(var g=f.tBodies,d=g.length,k=0,n=0;n<d;n++)k+=g[n].rows.length;f.numberOfRows=k;g=0==f.numberOfRows?1:Math.floor(Math.log(f.numberOfRows)/Math.LN10)+1;f.rowsPerPage=Math.pow(10,g-1);b(f);c(f)}})()};
wesCountry.table.sort=new function(){function b(b){for(var c=b.tHead.rows,a=c.length,d=0;d<a;d++)if("select"!=c[d].className){c[d].className="sorter";for(var l=c[d].cells.length,m=0;m<l;m++){c[d].cells[m].table=b;c[d].cells[m].index=m;c[d].cells[m].sort="empty";var h=new Image;h.className="empty";c[d].cells[m].appendChild(h);c[d].cells[m].onclick=function(){n(this.table,this.index,this)}}}}function n(b,c,a){for(var d=[],l=b.tBodies.length,m=0;m<l;m++)for(var h=b.tBodies[m],f=0;f<h.rows.length;f++)d.push(h.rows[f]);
a.sort="empty"==a.sort||"down"==a.sort?"up":"down";d.sort(function(b,d){if("empty"==b.className||"empty"==d.className)return 1;b=b.cells[c].innerHTML.toString();d=d.cells[c].innerHTML.toString();return b<d?"up"==a.sort?-1:1:b>d?"up"==a.sort?1:-1:0});a.querySelector("img").className=a.sort;h=b.querySelectorAll("tHead tr.sorter th");l=h.length;for(m=0;m<l;m++)m!=c&&v(h[m]);l=b.tHead;for(m=b.tFoot;b.hasChildNodes();)b.removeChild(b.firstChild);b.appendChild(l);m&&b.appendChild(m);h=document.createElement("tbody");
b.appendChild(h);l=d.length;for(m=0;m<l;m++)h.appendChild(d[m]);b.changePage&&b.changePage(1)}function v(b){var c=b.querySelectorAll("img");c&&c.length&&0<c.length&&(c[0].className="empty");b.sort="empty"}(function(){for(var e=document.querySelectorAll("table.sortable"),c=e.length,a=0;a<c;a++)b(e[a])})()};
function SortedArray(){var b=0;this.array=[];for(var n=arguments.length;b<n;)this.insert(arguments[b++]);this.length=0;this.insert=function(b){var e=this.array,c=e.length;e.push(b);for(this.length=this.array.length;c;){b=c;var a=--c;if(e[b]<e[a]){var d=e[b];e[b]=e[a];e[a]=d}}return this};this.get=function(b){return this.array[b]};this.getArray=function(){return this.array};this.uniqueInsert=function(b){-1==this.search(b)&&this.insert(b)};this.search=function(b){for(var e=0,c=this.array,a=c.length;a>
e;){var d=(a+e)/2>>>0,l=c[d];if(l<b)e=d+1;else if(l>b)a=d;else return d}return-1};this.remove=function(b){b=this.search(b);0<=b&&this.array.splice(b,1);this.length=this.array.length;return this}}"undefined"===typeof exports&&(exports={});
var Selector=exports.Selector=function(b,n){function v(a,b,d,f,h){var k=document.createElement("ul");k.className=n["ul-class"];a.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0});for(var l=a.length,m=null,p=!1,y=[],E=0;E<l;E++){var C=a[E],G=C.children&&C.children.length?C.children.length:0,D=document.createElement("li");k.appendChild(D);D.code=C.code;D.liParent=b;D.data=C;D.isSelected=!1;var z=document.createElement("a");z.href="javascript: void(0)";z.value=C.label;-1!=n.selectedItems.indexOf(D.code)&&
(p=!0,y.push(z));null==h&&g.push(z);z.previousSiblingLink=f;z.nextSiblingLink=null;z.parentLink=h;f&&(f.nextSiblingLink=z);0==E&&(m=z);z.className="circleAndText";D.appendChild(z);z.liParent=D;z.onclick=function(a){c(this.liParent,n.callback);a&&a.stopPropagation()};var H=document.createElement("div");H.className=0<G?"plusOrMinus":"hidden-plusOrMinus";H.innerHTML="+";z.appendChild(H);0<G&&(H.onclick=function(a){e(this);a.stopPropagation()});z.plusOrMinus=H;z.onkeydown=function(a){if(13==a.keyCode)return c(this.liParent,
n.callback),a.stopPropagation(),!1;if(38==a.keyCode)return this.previousSiblingLink&&this.previousSiblingLink.focus(),a.stopPropagation(),!1;if(40==a.keyCode)return this.plusOrMinus.opened&&this.firstChildLink?this.firstChildLink.focus():this.nextSiblingLink?this.nextSiblingLink.focus():this.parentLink.nextSiblingLink&&this.parentLink.nextSiblingLink.focus(),a.stopPropagation(),!1;if(37==a.keyCode||39==a.keyCode)return a.stopPropagation(),e(this.plusOrMinus),a.keyCode=9,a.keyCode};var F=document.createElement("div");
F.className="circle";z.appendChild(F);f=document.createElement("div");f.className="title";z.appendChild(f);var I=document.createTextNode(C.label);f.appendChild(I);f=z;0<G&&(G=document.createElement("span"),G.className="empty-counter",F.appendChild(G),I=document.createTextNode("0"),G.appendChild(I),D.counter={div:G,value:0},F=v(C.children,D,d+1,f,z),D.appendChild(F.ul),z.firstChildLink=F.firstChildLink,H.childrenUl=F.ul,!0==F.selected&&(p=!0,H.innerHTML="-"),y=y.concat(F.selectedItems));D.childNumber=
C.children?C.children.length:0}1<d&&!1==p&&(k.style.display="none");return{ul:k,firstChildLink:m,selected:p,selectedItems:y}}function e(a){"+"==a.innerHTML?(a.innerHTML="&#8212;",a.childrenUl&&(a.childrenUl.style.display="block"),a.opened=!0):(a.innerHTML="+",a.childrenUl&&(a.childrenUl.style.display="none"),a.opened=!1)}function c(b,c){var d=!b.isSelected;d&&0<n.maxSelectedItems&&k.length>=n.maxSelectedItems||a(b,c,d)}function a(a,b,c){d(a,c);if(a.liParent){var e=a.liParent.counter.value,e=c?e+1:
e-1;l(a.liParent,e);c?e==a.liParent.childNumber&&(a.liParent.className="selected",a.liParent.isSelected=!0,m(a.liParent.code,!0)):(a.liParent.className="not-selected",a.liParent.isSelected=!1,m(a.liParent.code,!1))}0<a.childNumber&&l(a,c?a.childNumber:0);b&&b.call(a,a.data,k)}function d(a,b){"li"==a.tagName.toLowerCase()&&(a.isSelected=b,a.className=b?"selected":"not-selected",m(a.code,b),a.firstChild.title=a.firstChild.value+(b?" is selected":""));for(var c=a&&a.children&&a.children.length?a.children.length:
0,e=0;e<c;e++)d(a.children[e],b)}function l(a,b){var c=a.counter;c.value=b;c.div.innerHTML=c.value;c.div.className=0<c.value?"counter":"empty-counter";b=a.firstChild.value;a.firstChild.title=b+": "+c.value+(1!=c.value?" selected countries":" selected country")}function m(a,b){a&&(b?k.uniqueInsert(a):k.remove(a))}function h(a,b){if(b instanceof Array)return b;if("object"===typeof b){for(var c in b)a[c]=h(a[c],b[c]);return a}return b}var f={"ul-class":"default-selector",callback:null,maxSelectedItems:-1,
selectedItems:[]},g=[],k=new SortedArray,p=null;(function(){var a=n;if(a){"string"===typeof a&&(a={container:a});var c=JSON.parse(JSON.stringify(f)),d;for(d in a)c[d]=h(c[d],a[d]);a=c}else a=JSON.parse(JSON.stringify(f));n=a;a=v(b,null,1,null,null);p=a.ul;a=a.selectedItems;c=a.length;for(d=0;d<c;d++)a[d].onclick()})();this.render=function(){return p};this.clear=function(){for(var b=p.children.length,c=0;c<b;c++)a(p.children[c],null,!1)};this.selectAll=function(){for(var a=g.length,b=0;b<a;b++)c(g[b].liParent,
null)}};
