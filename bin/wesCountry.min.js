var jSVG=new function(){function a(s){function w(c,e,d,f){e=new a(e);var r;f=JSON.parse(JSON.stringify(f));if(d)for(r in d)f[r]=d[r];r=f;f={};for(var h in r)f[h]=new b(null,h,r[h]);e.attributes(f);c&&c.appendChild(e);return e}var d={width:500,height:500,version:"1.1"},c={fill:"black",stroke:"none","stroke-width":"1",x:"0",y:"0",width:"10",height:"10",r:"5",cx:"5",cy:"5",x1:0,x2:10,y1:0,y2:10},b=function(b,c,e){this.namespace=b;this.name=c;this.value=e},e={},r={},m="",h=void 0,f=[];this.svg=function(b){b||
(b={});return w(null,"svg",b,d)};this.elementByName=function(b,e){return w(this,b,e,c)};this.g=function(b){return w(this,"g",b,c)};this.path=function(b){return w(this,"path",b,c)};this.rectangle=function(b){return w(this,"rect",b,c)};this.circle=function(b){return w(this,"circle",b,c)};this.line=function(b){return w(this,"line",b,c)};this.text=function(b){var e=w(this,"text",b,c);e.value(b.value);return e};this.a=function(b,e){var a=w(this,"a",b,c);a.attribute("http://www.w3.org/1999/xlink","xlink:href",
e);return a};this.attribute=function(c,a,d){e[a]=new b(c,a,d);return this};this.attributes=function(b){e=b;return this};this.style=function(b){m=b;return this};this.value=function(b){h=b;return this};this.event=function(b,c){r[b]=c;return this};this.width=function(){return e.width.value};this.height=function(){return e.height.value};this.appendChild=function(b){f.push(b)};this.render=function(){var b=document.createElementNS("http://www.w3.org/2000/svg",s),c;for(c in e){var a=e[c];b.setAttributeNS(a.namespace,
a.name,a.value)}b.setAttributeNS(null,"style",m);for(var d in r)b[d]=r[d];for(c=0;c<f.length;c++)b.appendChild(f[c].render());h&&(c=document.createTextNode(h),b.appendChild(c));return b};this.toString=function(){var b="",c;for(c in e)var a=e[c],b=b+String.format(' {0}="{1}"',a.name,a.value);c="";for(a=0;a<f.length;a++)c+=f[a].toString();return String.format('<{0} xmlns="{1}" {2} style="{3}">{4}{5}</{0}>',s,"http://www.w3.org/2000/svg",b,m,c,h?h:"")}}return new a};
String.format=function(a){for(var s=1;s<arguments.length;s++)a=a.replace(RegExp("\\{"+(s-1)+"\\}","g"),arguments[s]);return a};String.prototype.toFirstUpperCase=function(){var a=this[0].toUpperCase(),s=this.substr(1);return a+s};"undefined"===typeof exports&&(exports={});if("undefined"===typeof wesCountry)var wesCountry={};
wesCountry.charts=new function(){function a(c,b){if(b instanceof Array)return b;if("object"===typeof b){for(var e in b)c[e]=a(c[e],b[e]);return c}return b}function s(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function w(c){if(d){var b=c?c:event;c=b.clientX;b=b.clientY;diffX=24;diffY=0;d.style.top=b-2+diffY+document.body.scrollTop+"px";d.style.left=c-2+diffX+document.body.scrollLeft+"px"}}this.defaultOptions={width:600,height:400,chartType:"bar",container:"body",margins:[10,
20,10,5],backgroundColour:"none",serieColours:["#FCD271","#FA5882","#2BBBD8","#102E37"],overColour:"#333",groupMargin:4,barMargin:8,sortSeries:!1,valueOnItem:{show:!0,margin:5,"font-family":"Helvetica","font-colour":"#aaa","font-size":"16px"},xAxis:{title:"Months",colour:"none",margin:10,tickColour:"none",values:["Jan","Feb","Mar","Apr","May"],"font-family":"Helvetica","font-colour":"#666","font-size":"16px"},yAxis:{title:"Values",colour:"none",margin:10,tickColour:"#ccc","font-family":"Helvetica",
"font-colour":"#aaa","font-size":"16px","from-zero":!1},series:[{name:"First",values:[-1,4,5,3,6],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Second",values:[1,7,5,6,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Third",values:[0,1,2,3,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es",
"http://www.google.es"]}],legend:{show:!0,itemSize:1,"font-colour":"#666","font-family":"Helvetica","font-size":"16px"},tooltip:{show:!0,style:{display:"none",padding:"0.8em 0.5em","font-size":"12px",border:"0.1em solid #ccc","background-color":"#fff",position:"absolute",color:"#000"}},events:{onmouseover:function(c,b,a){c=String.format("Series '{0}': ({1}, {2})",c,b,a);console.log(c);wesCountry.charts.showTooltip(c)},onmouseout:function(){wesCountry.charts.hideTooltip()},onclick:function(){}}};this.sortSeries=
function(c){c.sort(function(b,c){for(var a=b.values,d=c.values,h=Math.max(a.length,d.length),f=0,g=0;g<h;g++)(a[g]?a[g]:0)>(d[g]?d[g]:0)&&f++;return f>=h/2?-1:1});return c};this.getSVG=function(c){return jSVG.svg({width:c.width,height:c.height})};this.showLegend=function(c,b,a){for(var d=a.series.length,m=b.width-0.2*b.marginRight,h=0;h<d;h++){var f=b.marginTop+2.5*(b.legendItemSize+b.barMargin)*h;c.circle({cx:m,cy:f,r:b.legendItemSize}).style(String.format("fill: {0}",a.serieColours[h%a.serieColours.length]));
c.text({x:m-2*b.legendItemSize,y:f,value:a.series[h].name}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",a.legend["font-colour"],a.legend["font-family"],a.legend["font-size"]))}};this.mergeOptionsAndDefaultOptions=function(c,b){if(c){"string"===typeof c&&(c={container:c});var e=this.clone(b),d;for(d in c)e[d]=a(e[d],c[d]);c=e}else c=this.clone(b);return c};this.clone=function(c){if(null==c||"object"!=typeof c)return c;var b=c.constructor(),
a;for(a in c)c.hasOwnProperty(a)&&(b[a]=c[a]);return b};this.setAxisY=function(c,b,a){c.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.yAxisMargin,y1:b.marginTop,y2:b.innerHeight+b.marginTop-b.xAxisMargin}).style(String.format("stroke: {0}",a.yAxis.colour));for(var d=b.ticksY+1,m=0;m<d;m++)c.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.innerWidth,y1:b.marginTop+m*b.yTickHeight,y2:b.marginTop+m*b.yTickHeight}).style(String.format("stroke: {0}",a.yAxis.tickColour));for(m=0;m<d;m++)c.text({x:b.marginLeft+
b.yAxisMargin/1.8,y:b.marginTop+m*b.yTickHeight,value:(b.maxValue-m*b.valueInc).toFixed(0)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",a.yAxis["font-colour"],a.yAxis["font-family"],a.yAxis["font-size"]));d=b.marginLeft;b=b.marginTop+(b.innerHeight-b.xAxisMargin)/2;c.text({x:d,y:b,value:a.yAxis.title,transform:String.format("rotate(-90 {0}, {1})",d,b)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",a.yAxis["font-colour"],
a.yAxis["font-family"],a.yAxis["font-size"]))};this.setAxisX=function(a,b,e){var d=b.marginTop+b.innerHeight-b.xAxisMargin+b.minValue/(b.maxValue-b.minValue)*(b.innerHeight-b.xAxisMargin);a.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.innerWidth,y1:d,y2:d}).style(String.format("stroke: {0}",e.xAxis.colour));for(var d=b.maxValueLength,m=0;m<d;m++){var h=b.marginLeft+b.yAxisMargin+b.groupMargin+b.xTickWidth/2+(b.xTickWidth+2*b.groupMargin)*m;a.line({x1:h,x2:h,y1:b.marginTop,y2:b.innerHeight+
b.marginTop-b.xAxisMargin}).style(String.format("stroke: {0}",e.xAxis.tickColour));a.text({x:h,y:b.marginTop+b.innerHeight-b.xAxisMargin/2,value:e.xAxis.values[m]?e.xAxis.values[m]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",e.xAxis["font-colour"],e.xAxis["font-family"],e.xAxis["font-size"]))}a.text({x:b.marginLeft+b.yAxisMargin+(b.innerWidth-b.yAxisMargin)/2,y:b.marginTop+b.innerHeight+b.xAxisMargin/2,value:e.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
e.xAxis["font-colour"],e.xAxis["font-family"],e.xAxis["font-size"]))};this.getMaxAndMinValuesAxisY=function(a){for(var b=0,e=Number.MAX_VALUE,d=a.series.length,m=null,h=null,f=0,g=0;g<d;g++){m=a.series[g].values.length;m>f&&(f=m);for(var q=0;q<m;q++)h=a.series[g].values[q],h instanceof Array&&(h=h[1]?h[1]:0),h>b&&(b=h),h<e&&(e=h)}!0==a.yAxis["from-zero"]&&0<e&&(e=0);a=this.getNearestNumber(e,b);return{max:a.max,min:a.min,valueLength:f,inc:a.inc}};this.setBackground=function(a,b,e){a.rectangle({x:0,
y:0,width:b.width,height:b.height}).style(String.format("fill: {0}",e.backgroundColour))};this.getNearestNumber=function(a,b){var e;e=b-a;var d=0;15>e?d=1:30>e?d=5:(e=1+Math.floor(Math.log(e)/Math.log(10)),d=Math.pow(10,e-1));e=d;return{max:Math.ceil(b/e)*e,min:Math.floor(a/e)*e,inc:e}};this.guid=function(){return s()+s()+"-"+s()+"-"+s()+"-"+s()+"-"+s()+s()+s()};var d=null;this.createTooltip=function(a){if(!0==a.tooltip.show){if(d=document.getElementById("wesCountryTooltip"),!d){d=document.createElement("span");
d.id="wesCountryTooltip";document.body.appendChild(d);var b="",e;for(e in a.tooltip.style)b+=String.format("{0}:{1};",e,a.tooltip.style[e]);d.setAttribute("style",b)}}else d=null};this.showTooltip=function(a){d&&(w(),d.innerHTML=a,d.style.display="block",window.onscroll=w)};this.hideTooltip=function(){d&&(d.style.display="none")}};
wesCountry.charts.barChart=function(a){function s(a,d){var c=a.width(),b=a.height(),e=b*d.margins[0]/100,r=c*d.margins[1]/100,m=b*d.margins[2]/100,h=c*d.margins[3]/100,f=d.yAxis.margin*c/100,g=d.xAxis.margin*b/100,q=c-h-r,v=b-e-m,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),t=k.max,p=0<k.min?0:k.min,n=k.valueLength,l=(t-p)/k.inc,k=(q-f)/k.valueLength,s=d.groupMargin*k/100,k=k-2*s,u=k/d.series.length,x=d.barMargin*u/100;return{width:c,height:b,marginTop:e,marginRight:r,marginBottom:m,marginLeft:h,
innerWidth:q,innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:t,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(v-g)/l:0,xTickWidth:k,valueInc:0!=l?(t-p)/l:0,barMargin:x,groupMargin:s,barWidth:u-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.yAxis["from-zero"]=!0;a.sortSeries&&(a.series=wesCountry.charts.sortSeries(a.series));var w=wesCountry.charts.getSVG(a),d=s(w,a),c=w.g();wesCountry.charts.setBackground(c,
d,a);wesCountry.charts.setAxisY(c,d,a);wesCountry.charts.setAxisX(c,d,a);for(var b=d.maxValueLength,e=a.series.length,r=d.barWidth,m=d.innerHeight-d.xAxisMargin,h=d.minValue/(d.maxValue-d.minValue)*m,f=0;f<b;f++)for(var g=0;g<e;g++){var q=a.series[g].name,v=a.series[g].values[f],k=a.series[g].urls?a.series[g].urls[f]:"",t=a.xAxis.values[g];v||(v=0);var p=d.marginLeft+d.yAxisMargin+d.groupMargin*(2*f+1)+d.barMargin+d.xTickWidth*f+(r+2*d.barMargin)*g,n=0<=v?d.marginTop+d.innerHeight-d.xAxisMargin+h-
v/(d.maxValue-d.minValue)*m:d.marginTop+d.innerHeight-d.xAxisMargin+h,l=Math.abs(v)/(d.maxValue-d.minValue)*m,q={x:p,y:n,width:r,height:l,serie:q,value:v,pos:t},t=String.format("fill: {0}",a.serieColours[g]),l=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},y=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
u=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};k&&""!=k?c.a({},k?k:"").rectangle(q).style(t).event("onmouseover",l).event("onmouseout",y).event("onclick",u):c.rectangle(q).style(t).event("onmouseover",l).event("onmouseout",y).event("onclick",u);!0==a.valueOnItem.show&&c.text({x:p+r/2,y:n-a.height/100*a.valueOnItem.margin,value:v.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
a.valueOnItem["font-colour"],a.valueOnItem["font-family"],a.valueOnItem["font-size"]))}a.legend.show&&wesCountry.charts.showLegend(c,d,a);wesCountry.charts.createTooltip(a);return w}()};wesCountry.charts.lineChart=function(a){return this.generateLineChart(a,!1)};wesCountry.charts.areaChart=function(a){return this.generateLineChart(a,!0)};
wesCountry.charts.generateLineChart=function(a,s){function w(a,b,d,r){return b.marginTop+b.innerHeight-b.xAxisMargin+d-a/(b.maxValue-b.minValue)*r}function d(a,b){var d=a.width(),r=a.height(),m=r*b.margins[0]/100,h=d*b.margins[1]/100,f=r*b.margins[2]/100,g=d*b.margins[3]/100,q=b.yAxis.margin*d/100,v=b.xAxis.margin*r/100,k=d-g-h,t=r-m-f,p=wesCountry.charts.getMaxAndMinValuesAxisY(b),n=p.max,l=p.min,s=p.valueLength;l==n&&(l=0<=l?0:l-2,n+=2);var u=(n-l)/p.inc,p=(k-q)/p.valueLength,w=b.groupMargin*p/
100,p=p-2*w,A=p/b.series.length,z=b.barMargin*A/100;return{width:d,height:r,marginTop:m,marginRight:h,marginBottom:f,marginLeft:g,innerWidth:k,innerHeight:t,yAxisMargin:q,xAxisMargin:v,maxValue:n,minValue:l,maxValueLength:s,ticksY:u,yTickHeight:0!=u?(t-v)/u:0,xTickWidth:p,valueInc:0!=u?(n-l)/u:0,barMargin:z,groupMargin:w,barWidth:A-2*z,legendItemSize:b.legend.itemSize*d/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.sortSeries&&(a.series=
wesCountry.charts.sortSeries(a.series));var c=wesCountry.charts.getSVG(a),b=d(c,a),e=c.g();wesCountry.charts.setBackground(e,b,a);wesCountry.charts.setAxisY(e,b,a);wesCountry.charts.setAxisX(e,b,a);for(var r=a.series.length,m=b.maxValueLength,h=b.innerHeight-b.xAxisMargin,f=b.minValue/(b.maxValue-b.minValue)*h,g=0;g<r;g++){var q="";if(s)var v=e.path();for(var k=Math.max(0,b.minValue),k=w(k,b,f,h),t="l"+wesCountry.charts.guid(),p=0;p<m;p++){var n=a.series[g].values[p],l=0<p?a.series[g].values[p-1]:
0,y=a.series[g].urls?a.series[g].urls[p]:"",u=a.series[g].name,x=a.xAxis.values[p];n||(n=0);l||(l=0);var A=b.marginLeft+b.yAxisMargin+b.groupMargin+b.xTickWidth/2+(b.xTickWidth+2*b.groupMargin)*p,z=w(n,b,f,h),B=b.marginLeft+b.yAxisMargin+b.groupMargin+b.xTickWidth/2+(b.xTickWidth+2*b.groupMargin)*(p-1),l=w(l,b,f,h),u={cx:A,cy:z,r:5,"class":t,serie:u,value:n,pos:x},x=String.format("fill: {0}",a.serieColours[g%a.serieColours.length]),C=function(b,a){for(var c=b.getAttribute("class"),c=b.parentNode.querySelectorAll("line."+
c),d=c.length,e=0;e<d;e++)c[e].setAttribute("stroke-width",a)},F=function(){this.setAttribute("r",8);C(this,2);a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},G=function(){this.setAttribute("r",5);C(this,1);a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},H=function(){this.setAttribute("r",5);C(this,1);a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};
y&&""!=y?e.a({},y?y:"").circle(u).style(x).event("onmouseover",F).event("onmouseout",G).event("onclick",H):e.circle(u).style(x).event("onmouseover",F).event("onmouseout",G).event("onclick",H);!0==a.valueOnItem.show&&e.text({x:A,y:z-a.height/100*a.valueOnItem.margin,value:0==n?"0":n.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.valueOnItem["font-colour"],a.valueOnItem["font-family"],a.valueOnItem["font-size"]));0<p?(e.line({x1:B,
x2:A,y1:l,y2:z,"stroke-width":1,"class":t}).style(String.format("stroke: {0}",a.serieColours[g%a.serieColours.length])).event("onmouseover",function(){C(this,2)}).event("onmouseout",function(){C(this,1)}),q+=String.format(" L{0} {1}",A,z)):q=String.format("M{0} {1} L{2} {3}",A,k,A,z)}q+=String.format(" L{0} {1} Z",A,k);s&&v.attribute(null,"d",q).style(String.format("stroke: {0}; fill: {0}; opacity: 0.5",a.serieColours[g%a.serieColours.length]))}a.legend.show&&wesCountry.charts.showLegend(e,b,a);wesCountry.charts.createTooltip(a);
return c}()};
wesCountry.charts.pieChart=function(a){function s(a,d){var c=a.width(),b=a.height(),e=b*d.margins[0]/100,r=c*d.margins[1]/100,m=b*d.margins[2]/100,h=c*d.margins[3]/100,f=d.yAxis.margin*c/100,g=d.xAxis.margin*b/100,q=c-h-r,v=b-e-m,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),t=k.max,p=k.min,n=k.valueLength,l=(t-p)/k.inc,k=(q-f)/k.valueLength,s=d.groupMargin*k/100,k=k-2*s,u=k/d.series.length,x=d.barMargin*u/100;return{width:c,height:b,marginTop:e,marginRight:r,marginBottom:m,marginLeft:h,innerWidth:q,
innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:t,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(v-g)/l:0,xTickWidth:k,valueInc:0!=l?(t-p)/l:0,barMargin:x,groupMargin:s,barWidth:u-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.sortSeries&&(a.series=wesCountry.charts.sortSeries(a.series));var w=wesCountry.charts.getSVG(a),d=s(w,a),c=w.g();wesCountry.charts.setBackground(c,d,a);var b=d.maxValueLength;
if(1==b)var e=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-2*d.xAxisMargin)/2,r=d.innerWidth/2,m=d.innerHeight/2,h=0,f=1;else 2==b?(e=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-2*d.xAxisMargin)/4,r=d.marginLeft+e,m=d.innerHeight/2,h=d.innerWidth-2*e,f=2):(8<b&&(b=8),e=Math.min(d.innerWidth,d.innerHeight-2*d.xAxisMargin)/4,f=Math.ceil(b/2),r=d.marginLeft+e,m=d.marginTop+e,h=(d.innerWidth-2*f*e)/(f-1)+2*e);for(var g=0;g<b;g++){if(g<f)var q=r+h*g,v=m;else q=b-f,v=(d.innerWidth-2*q*e)/
(q<f?q+1:q-1),h=v+2*e,q=d.marginLeft+(q<f?v:0)+e+h*(g%f),v=d.marginTop+d.innerHeight-d.xAxisMargin-e;c.text({x:q,y:v+e+d.xAxisMargin/2,value:a.xAxis.values[g]?a.xAxis.values[g]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]));for(var k=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),
this.getAttribute("value"))},t=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},p=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},n=0,l=0,y=a.series.length,u=0;u<y;u++){var x=Math.abs(a.series[u].values[g]);x||(x=0);0!=x&&l++;n+=x}for(var A=[],u=0;u<y;u++)(x=Math.abs(2*(a.series[u].values[g]/n)*Math.PI))||(x=0),A[u]=x;if(1==
l){for(var z="",l=x=n="",u=0;u<y;u++)if(0!=A[u]){z=a.serieColours[u];n=a.series[u].name;x=Math.abs(a.series[0].values[u]).toFixed(2);l=a.xAxis.values[g];break}c.circle({cx:q,cy:v,r:e,serie:n,value:x,pos:l}).event("onmouseover",k).event("onmouseout",t).event("onclick",p).style(String.format("fill: {0}",z))}else for(u=z=0;u<y;u++){var B=z+A[u],x=Math.abs(a.series[u].values[g]).toFixed(2),n=a.series[u].name,l=a.xAxis.values[g],C=q+e*Math.sin(z),F=v-e*Math.cos(z),G=q+e*Math.sin(B),H=v-e*Math.cos(B),E=
z+(B-z)/2,D=e+e/100*a.valueOnItem.margin,I=q+D*Math.sin(E),E=v-D*Math.cos(E),D=0;B-z>Math.PI&&(D=1);c.path({d:"M "+q+","+v+" L "+C+","+F+" A "+e+","+e+" 0 "+D+" 1 "+G+","+H+" Z",serie:n,value:x,pos:l}).event("onmouseover",k).event("onmouseout",t).event("onclick",p).style(String.format("fill: {0}",a.serieColours[u]));!0==a.valueOnItem.show&&c.text({x:I,y:E,value:x}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.valueOnItem["font-colour"],
a.valueOnItem["font-family"],a.valueOnItem["font-size"]));z=B}}a.legend.show&&wesCountry.charts.showLegend(c,d,a);wesCountry.charts.createTooltip(a);return w}()};
wesCountry.charts.polarChart=function(a){function s(a,d){var c=a.width(),b=a.height(),e=b*d.margins[0]/100,r=c*d.margins[1]/100,m=b*d.margins[2]/100,h=c*d.margins[3]/100,f=d.yAxis.margin*c/100,g=d.xAxis.margin*b/100,q=c-h-r,v=b-e-m,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),t=k.max,p=0<k.min?0:k.min,n=k.valueLength,l=(t-p)/k.inc,k=(q-f)/k.valueLength,s=d.groupMargin*k/100,k=k-2*s,u=k/d.series.length,x=d.barMargin*u/100;return{width:c,height:b,marginTop:e,marginRight:r,marginBottom:m,marginLeft:h,
innerWidth:q,innerHeight:v,yAxisMargin:f,xAxisMargin:g,maxValue:t,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(v-g)/l:0,xTickWidth:k,valueInc:0!=l?(t-p)/l:0,barMargin:x,groupMargin:s,barWidth:u-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);var w=wesCountry.charts.getSVG(a),d=s(w,a),c=w.g();wesCountry.charts.setBackground(c,d,a);for(var b=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-
2*d.xAxisMargin)/2,e=d.maxValueLength,r=d.width/2,m=d.height/2,h=[],f=0;f<e;f++)h.push({x:r+b*Math.cos(2*Math.PI*f/e-Math.PI/2),y:m+b*Math.sin(2*Math.PI*f/e-Math.PI/2)});for(f=0;f<e;f++){var g=h[f];c.line({x1:r,y1:m,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",a.yAxis.tickColour))}for(f=0;f<e;f++){var g=r+(b+d.xAxisMargin/2)*Math.cos(2*Math.PI*f/e-Math.PI/2),q=m+(b+d.xAxisMargin/2)*Math.sin(2*Math.PI*f/e-Math.PI/2),v=a.xAxis.values[f]?a.xAxis.values[f]:"";c.text({x:g,y:q,value:v}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]))}for(var k=d.maxValue,t=d.minValue,k=5*Math.ceil(k/5),t=5*Math.floor(t/5),p=b/5,v=(k-t)/5,f=0;5>=f;f++){h=[];g=p*f;c.text({x:r-d.xAxisMargin/2,y:m-g,value:t+f*v}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",a.yAxis["font-colour"],a.yAxis["font-family"],a.yAxis["font-size"]));for(var n=0;n<e;n++)h.push({x:r+g*Math.cos(2*Math.PI*n/e-Math.PI/2),y:m+g*Math.sin(2*Math.PI*n/e-
Math.PI/2)});for(n=0;n<e;n++){var g=h[n],l=0==n?h[e-1]:h[n-1];c.line({x1:l.x,y1:l.y,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",a.yAxis.tickColour))}}l=Math.abs(t/(k-t))*b;p=a.series.length;h=[];for(f=0;f<p;f++)for(h[f]=[],n=0;n<e;n++)(v=a.series[f].values[n])||(v=0),v=0>v?l-Math.abs(v/t)*l:v/k*(b-l)+l,g=r+v*Math.cos(2*Math.PI*n/e-Math.PI/2),q=m+v*Math.sin(2*Math.PI*n/e-Math.PI/2),h[f].push({x:g,y:q});for(var y=function(a,b){for(var c=a.getAttribute("class"),c=a.parentNode.querySelectorAll("line."+
c),d=c.length,e=0;e<d;e++)c[e].setAttribute("stroke-width",b)},b=function(){this.setAttribute("r",8);y(this,2);a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},r=function(){this.setAttribute("r",5);y(this,1);a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},m=function(){this.setAttribute("r",5);y(this,1);a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
f=0;f<p;f++)for(k="l"+wesCountry.charts.guid(),n=0;n<e;n++)g=h[f][n],l=0==n?h[f][e-1]:h[f][n-1],v=a.series[f].values[n],c.circle({cx:g.x,cy:g.y,r:5,serie:a.series[f].name,value:v,pos:a.xAxis.values[n],"class":k}).style(String.format("fill: {0}",a.serieColours[f%a.serieColours.length])).event("onmouseover",b).event("onmouseout",r).event("onclick",m),c.line({x1:l.x,y1:l.y,x2:g.x,y2:g.y,"class":k}).style(String.format("stroke: {0};",a.serieColours[f%a.serieColours.length]));a.legend.show&&wesCountry.charts.showLegend(c,
d,a);wesCountry.charts.createTooltip(a);return w}()};
wesCountry.charts.scatterPlot=function(a){function s(a,c){var b=a.width(),e=a.height(),r=e*c.margins[0]/100,m=b*c.margins[1]/100,h=e*c.margins[2]/100,f=b*c.margins[3]/100,g=c.yAxis.margin*b/100,q=c.xAxis.margin*e/100,v=b-f-m,k=e-r-h,t=wesCountry.charts.getMaxAndMinValuesAxisY(c),p=t.max,n=t.min,l=t.valueLength,s=(p-n)/t.inc,t=(v-g)/t.valueLength,u=c.groupMargin*t/100,t=t-2*u,w=t/c.series.length,A=c.barMargin*w/100;return{width:b,height:e,marginTop:r,marginRight:m,marginBottom:h,marginLeft:f,innerWidth:v,
innerHeight:k,yAxisMargin:g,xAxisMargin:q,maxValue:p,minValue:n,maxValueLength:l,ticksY:s,yTickHeight:0!=s?(k-q)/s:0,xTickWidth:t,valueInc:0!=s?(p-n)/s:0,barMargin:A,groupMargin:u,barWidth:w-2*A,legendItemSize:c.legend.itemSize*b/100}}function w(a,c,b){var e=c.marginTop+c.innerHeight-c.xAxisMargin+c.minValue/(0!=c.maxValue-c.minValue?c.maxValue-c.minValue:1)*(c.innerHeight-c.xAxisMargin);a.line({x1:c.marginLeft+c.yAxisMargin,x2:c.marginLeft+c.innerWidth,y1:e,y2:e}).style(String.format("stroke: {0}",
b.xAxis.colour));for(var e=0,r=Number.MAX_VALUE,m=b.series.length,h=null,f=null,g=0;g<m;g++)for(var h=b.series[g].values.length,q=0;q<h;q++)f=b.series[g].values[q][0]?b.series[g].values[q][0]:0,f>e&&(e=f),f<r&&(r=f);for(var e=wesCountry.charts.getNearestNumber(r,e),e={max:e.max,min:e.min,inc:e.inc},r=e.max,m=e.min,h=e.valueLength,f=(r-m)/e.inc,g=(c.innerWidth-c.yAxisMargin)/f,q=e.inc,s=f+1,k=0;k<s;k++){var t=c.marginLeft+c.yAxisMargin+g*k;a.line({x1:t,x2:t,y1:c.marginTop,y2:c.innerHeight+c.marginTop-
c.xAxisMargin}).style(String.format("stroke: {0}",b.xAxis.tickColour));a.text({x:t,y:c.marginTop+c.innerHeight-c.xAxisMargin/2,value:m+q*k}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",b.xAxis["font-colour"],b.xAxis["font-family"],b.xAxis["font-size"]))}a.text({x:c.marginLeft+c.yAxisMargin+(c.innerWidth-c.yAxisMargin)/2,y:c.marginTop+c.innerHeight+c.xAxisMargin/2,value:b.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
b.xAxis["font-colour"],b.xAxis["font-family"],b.xAxis["font-size"]));return{maxAndMinValues:e,maxValue:r,minValue:m,maxValueLength:h,ticksX:f,xTickWidth:g,incX:q}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);var d=wesCountry.charts.getSVG(a),c=s(d,a),b=d.g();wesCountry.charts.setBackground(b,c,a);wesCountry.charts.setAxisY(b,c,a);var e=w(b,c,a),r=a.series.length,m=c.innerHeight-c.xAxisMargin,h=c.innerWidth-c.yAxisMargin,f=0;0>=c.minValue&&
0!=c.maxValue-c.minValue&&(f=c.minValue/(c.maxValue-c.minValue)*m);var g=0;0>=e.minValue&&(g=e.xTickWidth*Math.abs(e.minValue));for(var q=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},v=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},k=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),
this.getAttribute("pos"),this.getAttribute("value"))},t=0;t<r;t++)for(var p=a.series[t].values,n=p.length,l=0;l<n;l++){var y=p[l][0]?p[l][0]:0,u=0,x=a.series[t].values[l],A=a.series[t].name,z=y;0<l&&(u=p[l-1][0]?p[l-1][0]:0);y||(y=0);u||(u=0);var u=p[l][1]?p[l][1]:0,B=0;0<l&&(B=p[l-1][1]?p[l-1][1]:0);u||(u=0);B||(B=0);b.circle({cx:c.marginLeft+c.yAxisMargin+g+(0==e.maxValue-e.minValue?0:(y-e.minValue)/(e.maxValue-e.minValue))*h,cy:c.marginTop+c.innerHeight-c.xAxisMargin+f-(0==c.maxValue-c.minValue?
1:(u-c.minValue)/(c.maxValue-c.minValue))*m,r:5,serie:A,value:x,pos:z}).style(String.format("fill: {0}",a.serieColours[t%a.serieColours.length])).event("onmouseover",q).event("onmouseout",v).event("onclick",k)}a.legend.show&&wesCountry.charts.showLegend(b,c,a);wesCountry.charts.createTooltip(a);return d}()};
wesCountry.charts.chart=function(a){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);var s;switch(a.chartType){case "bar":s=this.barChart(a);break;case "line":s=this.lineChart(a);break;case "pie":s=this.pieChart(a);break;case "area":s=this.areaChart(a)}document.querySelector(a.container).appendChild(s.render())};
wesCountry.charts.multiChart=function(a){function s(){var b=e.querySelector(".active").innerHTML.toLowerCase();a.chartType=b;a.container=".chartDiv";wesCountry.charts.chart(a)}function w(){document.querySelector(".active");document.querySelector(".chartDiv").innerHTML="";s()}function d(){for(var a=this.innerHTML,b=document.querySelector(".active"),c=document.querySelectorAll(".inactive"),d=c.length,e=0;e<d;e++)c[e].className=a===c[e].innerHTML?"active":"inactive";a!==b.innerHTML&&(b.className="inactive");
w()}function c(){for(var b=clone(seriesSave),c=document.querySelectorAll(".seriesSelector input"),d=b.length,e=0;e<d;e++)c[e].checked||delete b[e];c=[];for(e=0;e<d;e++)void 0!==b[e]&&c.push(b[e]);a.series=c;w()}a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);seriesSave=wesCountry.charts.clone(a.series);var b=a.chartType,b=b instanceof Array?b:[b],e=document.querySelector(a.container);(function(){var a=document.createElement("div");a.className="chartSelector";
for(var c=document.createElement("ul"),h=0;h<b.length;h++){var f=document.createElement("li"),g=document.createElement("a");g.className="inactive";g.onclick=d;g.innerHTML=b[h].toFirstUpperCase();f.appendChild(g);c.appendChild(f)}a.appendChild(c);a.querySelector("li a").className="active";e.appendChild(a)})();(function(){var a=document.createElement("div");a.className="seriesSelector";for(var b=0;b<seriesSave.length;b++){var d=document.createElement("input"),f=document.createElement("label");d.id=
seriesSave[b].name+"Checkbox"+wesCountry.charts.guid();d.type="checkbox";d.className="checks";d.onchange=c;d.checked=!0;f.for=d.id;f.innerHTML=seriesSave[b].name;a.appendChild(d);a.appendChild(f)}e.appendChild(a)})();(function(){var a=document.createElement("div");a.className="chartDiv";e.appendChild(a);s()})()};
