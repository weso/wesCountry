var jSVG=new function(){function a(w){function v(b,c,r,e){c=new a(c);var d;e=JSON.parse(JSON.stringify(e));if(r)for(d in r)e[d]=r[d];d=e;e={};for(var h in d)e[h]=new f(null,h,d[h]);c.attributes(e);b&&b.appendChild(c);return c}var d={width:500,height:500,version:"1.1"},c={fill:"black",stroke:"none","stroke-width":"1",x:"0",y:"0",width:"10",height:"10",r:"5",cx:"5",cy:"5",x1:0,x2:10,y1:0,y2:10},f=function(b,a,f){this.namespace=b;this.name=a;this.value=f},b={},r={},u="",h=void 0,e=[];this.svg=function(b){b||
(b={});return v(null,"svg",b,d)};this.elementByName=function(b,a){return v(this,b,a,c)};this.g=function(b){return v(this,"g",b,c)};this.path=function(b){return v(this,"path",b,c)};this.rectangle=function(b){return v(this,"rect",b,c)};this.circle=function(b){return v(this,"circle",b,c)};this.line=function(b){return v(this,"line",b,c)};this.text=function(b){var a=v(this,"text",b,c);a.value(b.value);return a};this.a=function(b,a){var f=v(this,"a",b,c);f.attribute("http://www.w3.org/1999/xlink","xlink:href",
a);return f};this.attribute=function(a,c,r){b[c]=new f(a,c,r);return this};this.attributes=function(a){b=a;return this};this.style=function(b){u=b;return this};this.value=function(b){h=b;return this};this.event=function(b,a){r[b]=a;return this};this.width=function(){return b.width.value};this.height=function(){return b.height.value};this.appendChild=function(b){e.push(b)};this.render=function(){var a=document.createElementNS("http://www.w3.org/2000/svg",w),f;for(f in b){var c=b[f];a.setAttributeNS(c.namespace,
c.name,c.value)}a.setAttributeNS(null,"style",u);for(var d in r)a[d]=r[d];for(f=0;f<e.length;f++)a.appendChild(e[f].render());h&&(f=document.createTextNode(h),a.appendChild(f));return a};this.toString=function(){var a="",f;for(f in b)var c=b[f],a=a+String.format(' {0}="{1}"',c.name,c.value);f="";for(c=0;c<e.length;c++)f+=e[c].toString();return String.format('<{0} xmlns="{1}" {2} style="{3}">{4}{5}</{0}>',w,"http://www.w3.org/2000/svg",a,u,f,h?h:"")}}return new a};
String.format=function(a){for(var w=1;w<arguments.length;w++)a=a.replace(RegExp("\\{"+(w-1)+"\\}","g"),arguments[w]);return a};String.prototype.toFirstUpperCase=function(){var a=this[0].toUpperCase(),w=this.substr(1);return a+w};"undefined"===typeof exports&&(exports={});if("undefined"===typeof wesCountry)var wesCountry={};
wesCountry.charts=new function(){function a(f,b){if(b instanceof Array)return b;if("object"===typeof b){for(var c in b)f[c]=a(f[c],b[c]);return f}return b}function w(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function v(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function d(a){if(c){var b=a?a:event;a=b.clientX;b=b.clientY;diffX=24;diffY=0;c.style.top=b-2+diffY+document.body.scrollTop+"px";c.style.left=
a-2+diffX+document.body.scrollLeft+"px"}}this.defaultOptions={width:600,height:400,chartType:"bar",container:"body",margins:[10,20,10,5],backgroundColour:"none",serieColours:["#FCD271","#FA5882","#2BBBD8","#102E37"],overColour:"#333",groupMargin:4,barMargin:8,sortSeries:!1,valueOnItem:{show:!0,margin:5,"font-family":"Helvetica","font-colour":"#aaa","font-size":"16px"},xAxis:{title:"Months",colour:"none",margin:10,tickColour:"none",values:["Jan","Feb","Mar","Apr","May"],"font-family":"Helvetica","font-colour":"#666",
"font-size":"16px"},yAxis:{title:"Values",colour:"none",margin:10,tickColour:"#ccc","font-family":"Helvetica","font-colour":"#aaa","font-size":"16px","from-zero":!1},series:[{name:"First",values:[-1,4,5,3,6],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Second",values:[1,7,5,6,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]},{name:"Third",
values:[0,1,2,3,4],urls:["http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es","http://www.google.es"]}],legend:{show:!0,itemSize:1,"font-colour":"#666","font-family":"Helvetica","font-size":"16px"},tooltip:{show:!0,style:{display:"none",padding:"0.8em 0.5em","font-size":"12px",border:"0.1em solid #ccc","background-color":"#fff",position:"absolute",color:"#000"}},events:{onmouseover:function(a,b,c){a=String.format("Series '{0}': ({1}, {2})",a,b,c);console.log(a);
wesCountry.charts.showTooltip(a)},onmouseout:function(){wesCountry.charts.hideTooltip()},onclick:function(){}}};this.sortSeries=function(a){a.sort(function(b,a){for(var f=b.values,c=a.values,e=Math.max(f.length,c.length),d=0,m=0;m<e;m++)(f[m]?f[m]:0)>(c[m]?c[m]:0)&&d++;return d>=e/2?-1:1});return a};this.getSVG=function(a){return jSVG.svg({width:a.width,height:a.height})};this.showLegend=function(a,b,c){for(var d=c.series.length,h=b.width-0.2*b.marginRight,e=0;e<d;e++){var g=b.marginTop+2.5*(b.legendItemSize+
b.barMargin)*e;a.circle({cx:h,cy:g,r:b.legendItemSize}).style(String.format("fill: {0}",c.serieColours[e%c.serieColours.length]));a.text({x:h-2*b.legendItemSize,y:g,value:c.series[e].name}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",c.legend["font-colour"],c.legend["font-family"],c.legend["font-size"]))}};this.mergeOptionsAndDefaultOptions=function(c,b){if(c){"string"===typeof c&&(c={container:c});var d=w(b),u;for(u in c)d[u]=a(d[u],c[u]);
c=d}else c=w(b);return c};this.setAxisY=function(a,b,c){a.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.yAxisMargin,y1:b.marginTop,y2:b.innerHeight+b.marginTop-b.xAxisMargin}).style(String.format("stroke: {0}",c.yAxis.colour));for(var d=b.ticksY+1,h=0;h<d;h++)a.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.innerWidth,y1:b.marginTop+h*b.yTickHeight,y2:b.marginTop+h*b.yTickHeight}).style(String.format("stroke: {0}",c.yAxis.tickColour));for(h=0;h<d;h++)a.text({x:b.marginLeft+b.yAxisMargin/
1.8,y:b.marginTop+h*b.yTickHeight,value:(b.maxValue-h*b.valueInc).toFixed(0)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",c.yAxis["font-colour"],c.yAxis["font-family"],c.yAxis["font-size"]));d=b.marginLeft;b=b.marginTop+(b.innerHeight-b.xAxisMargin)/2;a.text({x:d,y:b,value:c.yAxis.title,transform:String.format("rotate(-90 {0}, {1})",d,b)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",c.yAxis["font-colour"],
c.yAxis["font-family"],c.yAxis["font-size"]))};this.setAxisX=function(a,b,c){var d=b.marginTop+b.innerHeight-b.xAxisMargin+b.minValue/(b.maxValue-b.minValue)*(b.innerHeight-b.xAxisMargin);a.line({x1:b.marginLeft+b.yAxisMargin,x2:b.marginLeft+b.innerWidth,y1:d,y2:d}).style(String.format("stroke: {0}",c.xAxis.colour));for(var d=b.maxValueLength,h=0;h<d;h++){var e=b.marginLeft+b.yAxisMargin+b.groupMargin+b.xTickWidth/2+(b.xTickWidth+2*b.groupMargin)*h;a.line({x1:e,x2:e,y1:b.marginTop,y2:b.innerHeight+
b.marginTop-b.xAxisMargin}).style(String.format("stroke: {0}",c.xAxis.tickColour));a.text({x:e,y:b.marginTop+b.innerHeight-b.xAxisMargin/2,value:c.xAxis.values[h]?c.xAxis.values[h]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",c.xAxis["font-colour"],c.xAxis["font-family"],c.xAxis["font-size"]))}a.text({x:b.marginLeft+b.yAxisMargin+(b.innerWidth-b.yAxisMargin)/2,y:b.marginTop+b.innerHeight+b.xAxisMargin/2,value:c.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
c.xAxis["font-colour"],c.xAxis["font-family"],c.xAxis["font-size"]))};this.getMaxAndMinValuesAxisY=function(a){for(var b=0,c=Number.MAX_VALUE,d=a.series.length,h=null,e=null,g=0,m=0;m<d;m++){h=a.series[m].values.length;h>g&&(g=h);for(var q=0;q<h;q++)e=a.series[m].values[q],e instanceof Array&&(e=e[1]?e[1]:0),e>b&&(b=e),e<c&&(c=e)}!0==a.yAxis["from-zero"]&&0<c&&(c=0);a=this.getNearestNumber(c,b);return{max:a.max,min:a.min,valueLength:g,inc:a.inc}};this.setBackground=function(a,b,c){a.rectangle({x:0,
y:0,width:b.width,height:b.height}).style(String.format("fill: {0}",c.backgroundColour))};this.getNearestNumber=function(a,b){var c;c=b-a;var d=0;15>c?d=1:30>c?d=5:(c=1+Math.floor(Math.log(c)/Math.log(10)),d=Math.pow(10,c-1));c=d;return{max:Math.ceil(b/c)*c,min:Math.floor(a/c)*c,inc:c}};this.guid=function(){return v()+v()+"-"+v()+"-"+v()+"-"+v()+"-"+v()+v()+v()};var c=null;this.createTooltip=function(a){if(!0==a.tooltip.show){if(c=document.getElementById("wesCountryTooltip"),!c){c=document.createElement("span");
c.id="wesCountryTooltip";document.body.appendChild(c);var b="",d;for(d in a.tooltip.style)b+=String.format("{0}:{1};",d,a.tooltip.style[d]);c.setAttribute("style",b)}}else c=null};this.showTooltip=function(a){c&&(d(),c.innerHTML=a,c.style.display="block",window.onscroll=d)};this.hideTooltip=function(){c&&(c.style.display="none")}};
wesCountry.charts.barChart=function(a){function w(a,d){var c=a.width(),f=a.height(),b=f*d.margins[0]/100,r=c*d.margins[1]/100,u=f*d.margins[2]/100,h=c*d.margins[3]/100,e=d.yAxis.margin*c/100,g=d.xAxis.margin*f/100,m=c-h-r,q=f-b-u,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),s=k.max,p=0<k.min?0:k.min,n=k.valueLength,l=(s-p)/k.inc,k=(m-e)/k.valueLength,y=d.groupMargin*k/100,k=k-2*y,t=k/d.series.length,x=d.barMargin*t/100;return{width:c,height:f,marginTop:b,marginRight:r,marginBottom:u,marginLeft:h,
innerWidth:m,innerHeight:q,yAxisMargin:e,xAxisMargin:g,maxValue:s,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(q-g)/l:0,xTickWidth:k,valueInc:0!=l?(s-p)/l:0,barMargin:x,groupMargin:y,barWidth:t-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.yAxis["from-zero"]=!0;a.sortSeries&&(a.series=wesCountry.charts.sortSeries(a.series));var v=wesCountry.charts.getSVG(a),d=w(v,a),c=v.g();wesCountry.charts.setBackground(c,
d,a);wesCountry.charts.setAxisY(c,d,a);wesCountry.charts.setAxisX(c,d,a);for(var f=d.maxValueLength,b=a.series.length,r=d.barWidth,u=d.innerHeight-d.xAxisMargin,h=d.minValue/(d.maxValue-d.minValue)*u,e=0;e<f;e++)for(var g=0;g<b;g++){var m=a.series[g].name,q=a.series[g].values[e],k=a.series[g].urls?a.series[g].urls[e]:"",s=a.xAxis.values[g];q||(q=0);var p=d.marginLeft+d.yAxisMargin+d.groupMargin*(2*e+1)+d.barMargin+d.xTickWidth*e+(r+2*d.barMargin)*g,n=0<=q?d.marginTop+d.innerHeight-d.xAxisMargin+h-
q/(d.maxValue-d.minValue)*u:d.marginTop+d.innerHeight-d.xAxisMargin+h,l=Math.abs(q)/(d.maxValue-d.minValue)*u,m={x:p,y:n,width:r,height:l,serie:m,value:q,pos:s},s=String.format("fill: {0}",a.serieColours[g]),l=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},y=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
t=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};k&&""!=k?c.a({},k?k:"").rectangle(m).style(s).event("onmouseover",l).event("onmouseout",y).event("onclick",t):c.rectangle(m).style(s).event("onmouseover",l).event("onmouseout",y).event("onclick",t);!0==a.valueOnItem.show&&c.text({x:p+r/2,y:n-a.height/100*a.valueOnItem.margin,value:q.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
a.valueOnItem["font-colour"],a.valueOnItem["font-family"],a.valueOnItem["font-size"]))}a.legend.show&&wesCountry.charts.showLegend(c,d,a);wesCountry.charts.createTooltip(a);return v}()};wesCountry.charts.lineChart=function(a){return this.generateLineChart(a,!1)};wesCountry.charts.areaChart=function(a){return this.generateLineChart(a,!0)};
wesCountry.charts.generateLineChart=function(a,w){function v(a,d,b,r){return d.marginTop+d.innerHeight-d.xAxisMargin+b-a/(d.maxValue-d.minValue)*r}function d(a,d){var b=a.width(),r=a.height(),u=r*d.margins[0]/100,h=b*d.margins[1]/100,e=r*d.margins[2]/100,g=b*d.margins[3]/100,m=d.yAxis.margin*b/100,q=d.xAxis.margin*r/100,k=b-g-h,s=r-u-e,p=wesCountry.charts.getMaxAndMinValuesAxisY(d),n=p.max,l=p.min,v=p.valueLength;l==n&&(l=0<=l?0:l-2,n+=2);var t=(n-l)/p.inc,p=(k-m)/p.valueLength,x=d.groupMargin*p/
100,p=p-2*x,w=p/d.series.length,z=d.barMargin*w/100;return{width:b,height:r,marginTop:u,marginRight:h,marginBottom:e,marginLeft:g,innerWidth:k,innerHeight:s,yAxisMargin:m,xAxisMargin:q,maxValue:n,minValue:l,maxValueLength:v,ticksY:t,yTickHeight:0!=t?(s-q)/t:0,xTickWidth:p,valueInc:0!=t?(n-l)/t:0,barMargin:z,groupMargin:x,barWidth:w-2*z,legendItemSize:d.legend.itemSize*b/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.sortSeries&&(a.series=
wesCountry.charts.sortSeries(a.series));var c=wesCountry.charts.getSVG(a),f=d(c,a),b=c.g();wesCountry.charts.setBackground(b,f,a);wesCountry.charts.setAxisY(b,f,a);wesCountry.charts.setAxisX(b,f,a);for(var r=a.series.length,u=f.maxValueLength,h=f.innerHeight-f.xAxisMargin,e=f.minValue/(f.maxValue-f.minValue)*h,g=0;g<r;g++){var m="";if(w)var q=b.path();for(var k=Math.max(0,f.minValue),k=v(k,f,e,h),s="l"+wesCountry.charts.guid(),p=0;p<u;p++){var n=a.series[g].values[p],l=0<p?a.series[g].values[p-1]:
0,y=a.series[g].urls?a.series[g].urls[p]:"",t=a.series[g].name,x=a.xAxis.values[p];n||(n=0);l||(l=0);var A=f.marginLeft+f.yAxisMargin+f.groupMargin+f.xTickWidth/2+(f.xTickWidth+2*f.groupMargin)*p,z=v(n,f,e,h),B=f.marginLeft+f.yAxisMargin+f.groupMargin+f.xTickWidth/2+(f.xTickWidth+2*f.groupMargin)*(p-1),l=v(l,f,e,h),t={cx:A,cy:z,r:5,"class":s,serie:t,value:n,pos:x},x=String.format("fill: {0}",a.serieColours[g%a.serieColours.length]),C=function(a,b){for(var c=a.getAttribute("class"),c=a.parentNode.querySelectorAll("line."+
c),d=c.length,e=0;e<d;e++)c[e].setAttribute("stroke-width",b)},F=function(){this.setAttribute("r",8);C(this,2);a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},G=function(){this.setAttribute("r",5);C(this,1);a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},H=function(){this.setAttribute("r",5);C(this,1);a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))};
y&&""!=y?b.a({},y?y:"").circle(t).style(x).event("onmouseover",F).event("onmouseout",G).event("onclick",H):b.circle(t).style(x).event("onmouseover",F).event("onmouseout",G).event("onclick",H);!0==a.valueOnItem.show&&b.text({x:A,y:z-a.height/100*a.valueOnItem.margin,value:0==n?"0":n.toFixed(2)}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.valueOnItem["font-colour"],a.valueOnItem["font-family"],a.valueOnItem["font-size"]));0<p?(b.line({x1:B,
x2:A,y1:l,y2:z,"stroke-width":1,"class":s}).style(String.format("stroke: {0}",a.serieColours[g%a.serieColours.length])).event("onmouseover",function(){C(this,2)}).event("onmouseout",function(){C(this,1)}),m+=String.format(" L{0} {1}",A,z)):m=String.format("M{0} {1} L{2} {3}",A,k,A,z)}m+=String.format(" L{0} {1} Z",A,k);w&&q.attribute(null,"d",m).style(String.format("stroke: {0}; fill: {0}; opacity: 0.5",a.serieColours[g%a.serieColours.length]))}a.legend.show&&wesCountry.charts.showLegend(b,f,a);wesCountry.charts.createTooltip(a);
return c}()};
wesCountry.charts.pieChart=function(a){function w(a,d){var c=a.width(),f=a.height(),b=f*d.margins[0]/100,r=c*d.margins[1]/100,u=f*d.margins[2]/100,h=c*d.margins[3]/100,e=d.yAxis.margin*c/100,g=d.xAxis.margin*f/100,m=c-h-r,q=f-b-u,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),s=k.max,p=k.min,n=k.valueLength,l=(s-p)/k.inc,k=(m-e)/k.valueLength,y=d.groupMargin*k/100,k=k-2*y,t=k/d.series.length,x=d.barMargin*t/100;return{width:c,height:f,marginTop:b,marginRight:r,marginBottom:u,marginLeft:h,innerWidth:m,
innerHeight:q,yAxisMargin:e,xAxisMargin:g,maxValue:s,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(q-g)/l:0,xTickWidth:k,valueInc:0!=l?(s-p)/l:0,barMargin:x,groupMargin:y,barWidth:t-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);a.sortSeries&&(a.series=wesCountry.charts.sortSeries(a.series));var v=wesCountry.charts.getSVG(a),d=w(v,a),c=v.g();wesCountry.charts.setBackground(c,d,a);var f=d.maxValueLength;
if(1==f)var b=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-2*d.xAxisMargin)/2,r=d.innerWidth/2,u=d.innerHeight/2,h=0,e=1;else 2==f?(b=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-2*d.xAxisMargin)/4,r=d.marginLeft+b,u=d.innerHeight/2,h=d.innerWidth-2*b,e=2):(8<f&&(f=8),b=Math.min(d.innerWidth,d.innerHeight-2*d.xAxisMargin)/4,e=Math.ceil(f/2),r=d.marginLeft+b,u=d.marginTop+b,h=(d.innerWidth-2*e*b)/(e-1)+2*b);for(var g=0;g<f;g++){if(g<e)var m=r+h*g,q=u;else m=f-e,q=(d.innerWidth-2*m*b)/
(m<e?m+1:m-1),h=q+2*b,m=d.marginLeft+(m<e?q:0)+b+h*(g%e),q=d.marginTop+d.innerHeight-d.xAxisMargin-b;c.text({x:m,y:q+b+d.xAxisMargin/2,value:a.xAxis.values[g]?a.xAxis.values[g]:""}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]));for(var k=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),
this.getAttribute("value"))},s=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},p=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},n=0,l=0,y=a.series.length,t=0;t<y;t++){var x=Math.abs(a.series[t].values[g]);x||(x=0);0!=x&&l++;n+=x}for(var A=[],t=0;t<y;t++)(x=Math.abs(2*(a.series[t].values[g]/n)*Math.PI))||(x=0),A[t]=x;if(1==
l){for(var z="",l=x=n="",t=0;t<y;t++)if(0!=A[t]){z=a.serieColours[t];n=a.series[t].name;x=Math.abs(a.series[0].values[t]).toFixed(2);l=a.xAxis.values[g];break}c.circle({cx:m,cy:q,r:b,serie:n,value:x,pos:l}).event("onmouseover",k).event("onmouseout",s).event("onclick",p).style(String.format("fill: {0}",z))}else for(t=z=0;t<y;t++){var B=z+A[t],x=Math.abs(a.series[t].values[g]).toFixed(2),n=a.series[t].name,l=a.xAxis.values[g],C=m+b*Math.sin(z),F=q-b*Math.cos(z),G=m+b*Math.sin(B),H=q-b*Math.cos(B),E=
z+(B-z)/2,D=b+b/100*a.valueOnItem.margin,I=m+D*Math.sin(E),E=q-D*Math.cos(E),D=0;B-z>Math.PI&&(D=1);c.path({d:"M "+m+","+q+" L "+C+","+F+" A "+b+","+b+" 0 "+D+" 1 "+G+","+H+" Z",serie:n,value:x,pos:l}).event("onmouseover",k).event("onmouseout",s).event("onclick",p).style(String.format("fill: {0}",a.serieColours[t]));!0==a.valueOnItem.show&&c.text({x:I,y:E,value:x}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",a.valueOnItem["font-colour"],
a.valueOnItem["font-family"],a.valueOnItem["font-size"]));z=B}}a.legend.show&&wesCountry.charts.showLegend(c,d,a);wesCountry.charts.createTooltip(a);return v}()};
wesCountry.charts.polarChart=function(a){function w(a,d){var c=a.width(),f=a.height(),b=f*d.margins[0]/100,r=c*d.margins[1]/100,u=f*d.margins[2]/100,h=c*d.margins[3]/100,e=d.yAxis.margin*c/100,g=d.xAxis.margin*f/100,m=c-h-r,q=f-b-u,k=wesCountry.charts.getMaxAndMinValuesAxisY(d),s=k.max,p=0<k.min?0:k.min,n=k.valueLength,l=(s-p)/k.inc,k=(m-e)/k.valueLength,y=d.groupMargin*k/100,k=k-2*y,t=k/d.series.length,x=d.barMargin*t/100;return{width:c,height:f,marginTop:b,marginRight:r,marginBottom:u,marginLeft:h,
innerWidth:m,innerHeight:q,yAxisMargin:e,xAxisMargin:g,maxValue:s,minValue:p,maxValueLength:n,ticksY:l,yTickHeight:0!=l?(q-g)/l:0,xTickWidth:k,valueInc:0!=l?(s-p)/l:0,barMargin:x,groupMargin:y,barWidth:t-2*x,legendItemSize:d.legend.itemSize*c/100}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);var v=wesCountry.charts.getSVG(a),d=w(v,a),c=v.g();wesCountry.charts.setBackground(c,d,a);for(var f=Math.min(d.innerWidth-2*d.yAxisMargin,d.innerHeight-
2*d.xAxisMargin)/2,b=d.maxValueLength,r=d.width/2,u=d.height/2,h=[],e=0;e<b;e++)h.push({x:r+f*Math.cos(2*Math.PI*e/b-Math.PI/2),y:u+f*Math.sin(2*Math.PI*e/b-Math.PI/2)});for(e=0;e<b;e++){var g=h[e];c.line({x1:r,y1:u,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",a.yAxis.tickColour))}for(e=0;e<b;e++){var g=r+(f+d.xAxisMargin/2)*Math.cos(2*Math.PI*e/b-Math.PI/2),m=u+(f+d.xAxisMargin/2)*Math.sin(2*Math.PI*e/b-Math.PI/2),q=a.xAxis.values[e]?a.xAxis.values[e]:"";c.text({x:g,y:m,value:q}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle;dominant-baseline: middle",
a.xAxis["font-colour"],a.xAxis["font-family"],a.xAxis["font-size"]))}for(var k=d.maxValue,s=d.minValue,k=5*Math.ceil(k/5),s=5*Math.floor(s/5),p=f/5,q=(k-s)/5,e=0;5>=e;e++){h=[];g=p*e;c.text({x:r-d.xAxisMargin/2,y:u-g,value:s+e*q}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: end;dominant-baseline: middle",a.yAxis["font-colour"],a.yAxis["font-family"],a.yAxis["font-size"]));for(var n=0;n<b;n++)h.push({x:r+g*Math.cos(2*Math.PI*n/b-Math.PI/2),y:u+g*Math.sin(2*Math.PI*n/b-
Math.PI/2)});for(n=0;n<b;n++){var g=h[n],l=0==n?h[b-1]:h[n-1];c.line({x1:l.x,y1:l.y,x2:g.x,y2:g.y}).style(String.format("stroke: {0};",a.yAxis.tickColour))}}l=Math.abs(s/(k-s))*f;p=a.series.length;h=[];for(e=0;e<p;e++)for(h[e]=[],n=0;n<b;n++)(q=a.series[e].values[n])||(q=0),q=0>q?l-Math.abs(q/s)*l:q/k*(f-l)+l,g=r+q*Math.cos(2*Math.PI*n/b-Math.PI/2),m=u+q*Math.sin(2*Math.PI*n/b-Math.PI/2),h[e].push({x:g,y:m});for(var y=function(a,b){for(var c=a.getAttribute("class"),c=a.parentNode.querySelectorAll("line."+
c),d=c.length,e=0;e<d;e++)c[e].setAttribute("stroke-width",b)},f=function(){this.setAttribute("r",8);y(this,2);a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},r=function(){this.setAttribute("r",5);y(this,1);a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},u=function(){this.setAttribute("r",5);y(this,1);a.events.onclick(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},
e=0;e<p;e++)for(k="l"+wesCountry.charts.guid(),n=0;n<b;n++)g=h[e][n],l=0==n?h[e][b-1]:h[e][n-1],q=a.series[e].values[n],c.circle({cx:g.x,cy:g.y,r:5,serie:a.series[e].name,value:q,pos:a.xAxis.values[n],"class":k}).style(String.format("fill: {0}",a.serieColours[e%a.serieColours.length])).event("onmouseover",f).event("onmouseout",r).event("onclick",u),c.line({x1:l.x,y1:l.y,x2:g.x,y2:g.y,"class":k}).style(String.format("stroke: {0};",a.serieColours[e%a.serieColours.length]));a.legend.show&&wesCountry.charts.showLegend(c,
d,a);wesCountry.charts.createTooltip(a);return v}()};
wesCountry.charts.scatterPlot=function(a){function w(a,c){var f=a.width(),b=a.height(),r=b*c.margins[0]/100,u=f*c.margins[1]/100,h=b*c.margins[2]/100,e=f*c.margins[3]/100,g=c.yAxis.margin*f/100,m=c.xAxis.margin*b/100,q=f-e-u,k=b-r-h,s=wesCountry.charts.getMaxAndMinValuesAxisY(c),p=s.max,n=s.min,l=s.valueLength,v=(p-n)/s.inc,s=(q-g)/s.valueLength,t=c.groupMargin*s/100,s=s-2*t,w=s/c.series.length,A=c.barMargin*w/100;return{width:f,height:b,marginTop:r,marginRight:u,marginBottom:h,marginLeft:e,innerWidth:q,
innerHeight:k,yAxisMargin:g,xAxisMargin:m,maxValue:p,minValue:n,maxValueLength:l,ticksY:v,yTickHeight:0!=v?(k-m)/v:0,xTickWidth:s,valueInc:0!=v?(p-n)/v:0,barMargin:A,groupMargin:t,barWidth:w-2*A,legendItemSize:c.legend.itemSize*f/100}}function v(a,c,f){var b=c.marginTop+c.innerHeight-c.xAxisMargin+c.minValue/(0!=c.maxValue-c.minValue?c.maxValue-c.minValue:1)*(c.innerHeight-c.xAxisMargin);a.line({x1:c.marginLeft+c.yAxisMargin,x2:c.marginLeft+c.innerWidth,y1:b,y2:b}).style(String.format("stroke: {0}",
f.xAxis.colour));for(var b=0,r=Number.MAX_VALUE,u=f.series.length,h=null,e=null,g=0;g<u;g++)for(var h=f.series[g].values.length,m=0;m<h;m++)e=f.series[g].values[m][0]?f.series[g].values[m][0]:0,e>b&&(b=e),e<r&&(r=e);for(var b=wesCountry.charts.getNearestNumber(r,b),b={max:b.max,min:b.min,inc:b.inc},r=b.max,u=b.min,h=b.valueLength,e=(r-u)/b.inc,g=(c.innerWidth-c.yAxisMargin)/e,m=b.inc,q=e+1,k=0;k<q;k++){var s=c.marginLeft+c.yAxisMargin+g*k;a.line({x1:s,x2:s,y1:c.marginTop,y2:c.innerHeight+c.marginTop-
c.xAxisMargin}).style(String.format("stroke: {0}",f.xAxis.tickColour));a.text({x:s,y:c.marginTop+c.innerHeight-c.xAxisMargin/2,value:u+m*k}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",f.xAxis["font-colour"],f.xAxis["font-family"],f.xAxis["font-size"]))}a.text({x:c.marginLeft+c.yAxisMargin+(c.innerWidth-c.yAxisMargin)/2,y:c.marginTop+c.innerHeight+c.xAxisMargin/2,value:f.xAxis.title}).style(String.format("fill: {0};font-family:{1};font-size:{2};text-anchor: middle",
f.xAxis["font-colour"],f.xAxis["font-family"],f.xAxis["font-size"]));return{maxAndMinValues:b,maxValue:r,minValue:u,maxValueLength:h,ticksX:e,xTickWidth:g,incX:m}}return function(){a=wesCountry.charts.mergeOptionsAndDefaultOptions(a,wesCountry.charts.defaultOptions);var d=wesCountry.charts.getSVG(a),c=w(d,a),f=d.g();wesCountry.charts.setBackground(f,c,a);wesCountry.charts.setAxisY(f,c,a);var b=v(f,c,a),r=a.series.length,u=c.innerHeight-c.xAxisMargin,h=c.innerWidth-c.yAxisMargin,e=0;0>=c.minValue&&
0!=c.maxValue-c.minValue&&(e=c.minValue/(c.maxValue-c.minValue)*u);var g=0;0>=b.minValue&&(g=b.xTickWidth*Math.abs(b.minValue));for(var m=function(){this.colour=this.style.fill;this.style.fill=a.overColour;a.events.onmouseover(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},q=function(){this.style.fill=this.colour;a.events.onmouseout(this.getAttribute("serie"),this.getAttribute("pos"),this.getAttribute("value"))},k=function(){this.style.fill=this.colour;a.events.onclick(this.getAttribute("serie"),
this.getAttribute("pos"),this.getAttribute("value"))},s=0;s<r;s++)for(var p=a.series[s].values,n=p.length,l=0;l<n;l++){var y=p[l][0]?p[l][0]:0,t=0,x=a.series[s].values[l],A=a.series[s].name,z=y;0<l&&(t=p[l-1][0]?p[l-1][0]:0);y||(y=0);t||(t=0);var t=p[l][1]?p[l][1]:0,B=0;0<l&&(B=p[l-1][1]?p[l-1][1]:0);t||(t=0);B||(B=0);f.circle({cx:c.marginLeft+c.yAxisMargin+g+(0==b.maxValue-b.minValue?0:(y-b.minValue)/(b.maxValue-b.minValue))*h,cy:c.marginTop+c.innerHeight-c.xAxisMargin+e-(0==c.maxValue-c.minValue?
1:(t-c.minValue)/(c.maxValue-c.minValue))*u,r:5,serie:A,value:x,pos:z}).style(String.format("fill: {0}",a.serieColours[s%a.serieColours.length])).event("onmouseover",m).event("onmouseout",q).event("onclick",k)}a.legend.show&&wesCountry.charts.showLegend(f,c,a);wesCountry.charts.createTooltip(a);return d}()};
wesCountry.charts.chart=function(a){a=mergeOptionsAndDefaultOptions(a,defaultOptions);var w;switch(a.chartType){case "bar":w=this.barChart(a);break;case "line":w=this.lineChart(a);break;case "pie":w=this.pieChart(a);break;case "area":w=this.areaChart(a)}document.querySelector(a.container).appendChild(w.render())};
wesCountry.charts.multiChart=function(a){function w(){var c=b.querySelector(".active").innerHTML.toLowerCase();a.chartType=c;a.container=".chartDiv";jGraf.chart(a)}function v(){document.querySelector(".active");document.querySelector(".chartDiv").innerHTML="";w()}function d(){for(var a=this.innerHTML,b=document.querySelector(".active"),c=document.querySelectorAll(".inactive"),d=c.length,f=0;f<d;f++)c[f].className=a===c[f].innerHTML?"active":"inactive";a!==b.innerHTML&&(b.className="inactive");v()}
function c(){for(var b=clone(seriesSave),c=document.querySelectorAll(".seriesSelector input"),d=b.length,e=0;e<d;e++)c[e].checked||delete b[e];c=[];for(e=0;e<d;e++)void 0!==b[e]&&c.push(b[e]);a.series=c;v()}a=mergeOptionsAndDefaultOptions(a,defaultOptions);seriesSave=clone(a.series);var f=a.chartType,f=f instanceof Array?f:[f],b=document.querySelector(a.container);(function(){var a=document.createElement("div");a.className="chartSelector";for(var c=document.createElement("ul"),h=0;h<f.length;h++){var e=
document.createElement("li"),g=document.createElement("a");g.className="inactive";g.onclick=d;g.innerHTML=f[h].toFirstUpperCase();e.appendChild(g);c.appendChild(e)}a.appendChild(c);a.querySelector("li a").className="active";b.appendChild(a)})();(function(){var a=document.createElement("div");a.className="seriesSelector";for(var d=0;d<seriesSave.length;d++){var f=document.createElement("input"),e=document.createElement("label");f.id=seriesSave[d].name+"Checkbox"+guid();f.type="checkbox";f.className=
"checks";f.onchange=c;f.checked=!0;e.for=f.id;e.innerHTML=seriesSave[d].name;a.appendChild(f);a.appendChild(e)}b.appendChild(a)})();(function(){var a=document.createElement("div");a.className="chartDiv";b.appendChild(a);w()})()};
